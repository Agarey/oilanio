{"ast":null,"code":"var _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilan-mirror\\\\goco\\\\src\\\\components\\\\ModerateCourseCard\\\\ModerateCourseCard.js\";\nvar __jsx = React.createElement;\nimport styles from '../../../styles/components/CourseCard.module.css';\nimport Link from \"next/link\";\nimport React, { useEffect, useState } from \"react\";\nimport { SignupToCourseForm } from \"../Forms/SignupToCourseForm/SignupToCourseForm\";\nimport ModalWindow from \"../Modal/ModalWindow\";\nimport classnames from 'classnames';\nimport globals from \"../../globals\";\nimport Image from \"next/image\";\n\nconst axios = require('axios').default;\n\nexport default function ModerateCourseCard(props) {\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: showInfo,\n    1: setShowInfo\n  } = useState(false);\n  const {\n    0: showPhoneNumber,\n    1: setShowPhoneNumber\n  } = useState(false);\n  const {\n    0: showContacts,\n    1: setShowContacts\n  } = useState(false);\n\n  const handleClose = () => setShow(false);\n\n  const handleShow = () => setShow(true);\n\n  const {\n    0: promotions,\n    1: setPromotions\n  } = useState([]);\n  const {\n    0: stocks,\n    1: setStocks\n  } = useState([]);\n  const {\n    0: promotionsLoaded,\n    1: setPromotionsLoaded\n  } = useState(false);\n\n  const loadStocks = async () => {\n    let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {\n      direction_id: 0\n    });\n    setStocks(result.data);\n\n    for (let i = 0; i < result.data.length; i++) {\n      if (result.data[i].center_id === props.course.course_id) {\n        promotions.push(result.data[i]);\n      }\n    }\n\n    setPromotions(promotions);\n\n    if (result.data.length > 0) {\n      setPromotionsLoaded(true);\n    } else {\n      setPromotionsLoaded(false);\n    }\n  };\n\n  const {\n    0: showPromotions,\n    1: setShowPromotions\n  } = useState(false);\n  const {\n    0: promotionIndex,\n    1: setPromotionIndex\n  } = useState(0);\n  const {\n    0: wordsToShowLength,\n    1: setWordsToShowLength\n  } = useState(10);\n  const {\n    0: heartValue,\n    1: setHeartValue\n  } = useState('\\u2661');\n\n  function prettify(num) {\n    var n = num.toString();\n    return n.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + ' ');\n  }\n\n  const coursePrice = prettify(props.course.price);\n  const {\n    0: courseDescription,\n    1: setCourseDecription\n  } = useState(props.course.description === undefined ? \"\" : props.course.description);\n\n  const getCurrentDateTime = () => {\n    let currentDate = new Date();\n    let dd = currentDate.getDate();\n    if (dd < 10) dd = '0' + dd;\n    let mm = currentDate.getMonth() + 1;\n    if (mm < 10) mm = '0' + mm;\n    let yy = currentDate.getFullYear();\n    let hours = currentDate.getHours();\n    let min = currentDate.getMinutes();\n    let sec = currentDate.getSeconds();\n    return yy + \"-\" + mm + \"-\" + dd + \" \" + hours + \":\" + min + \":\" + sec;\n  };\n\n  const {\n    0: applicationSent,\n    1: setApplicationSent\n  } = useState(false);\n\n  const sendApplication = (courseId, userInfo) => {\n    let data = {\n      city_id: props.course.city_id,\n      direction_id: props.course.category_id || props.course.direction_id,\n      name: userInfo.fullName,\n      phone: userInfo.phone,\n      email: userInfo.email,\n      promocode: userInfo.promocode,\n      age: 0,\n      isOnline: props.course.format !== 'Offline',\n      course_id: props.course.course_id,\n      role_id: 4\n    };\n    axios({\n      method: 'post',\n      url: `${globals.productionServerDomain}/createCourseSearchTicket`,\n      data: data,\n      headers: {\n        'Authorization': `Bearer ${globals.localStorageKeys.authToken}`\n      }\n    }).then(function (res) {}).catch(() => {\n      alert('Что-то пошло нетак!');\n    });\n  };\n\n  const {\n    0: mobileVersion,\n    1: setMobileVersion\n  } = useState(false);\n  useEffect(() => {\n    if (window.innerWidth <= 761) {\n      setMobileVersion(true);\n      console.log('mob version ' + true);\n    } else {\n      setMobileVersion(false);\n      console.log('mob version ' + false);\n    }\n\n    loadStocks();\n  }, []);\n  return __jsx(\"div\", {\n    className: styles.container,\n    style: {\n      width: props.application !== undefined ? '40%' : null\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    style: {\n      width: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 29\n    }\n  }), __jsx(\"div\", {\n    className: styles.titleImage__Body,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 29\n    }\n  }, showPromotions === false && __jsx(\"div\", {\n    className: styles.image_block,\n    style: props.course.img_src ? {\n      backgroundImage: `url(${props.course.img_src})`,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundColor: 'white',\n      border: '1px solid white'\n    } : {\n      backgroundImage: `url('https://realibi.kz/file/510188.jpg')`,\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundColor: 'white',\n      border: '1px solid white'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 37\n    }\n  }), __jsx(\"div\", {\n    style: props.course.verificated ? {\n      backgroundSize: '70% 90%',\n      backgroundPosition: 'center',\n      backgroundRepeat: 'no-repeat',\n      height: '72px',\n      width: '72px',\n      position: 'absolute',\n      right: '5px',\n      backgroundImage: 'url(https://realibi.kz/file/777788.png)',\n      bottom: '15px'\n    } : {\n      backgroundSize: '70% 90%',\n      backgroundPosition: 'center',\n      backgroundRepeat: 'no-repeat',\n      height: '72px',\n      width: '72px',\n      position: 'absolute',\n      right: '5px',\n      bottom: '15px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 37\n    }\n  })), __jsx(\"div\", {\n    className: styles.info_block,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 29\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 33\n    }\n  }, __jsx(\"p\", {\n    className: styles.fullname,\n    onClick: () => {\n      axios.post(globals.productionServerDomain + '/logUserClick', {\n        course_id: props.course.course_id,\n        card_id: props.course.id\n      });\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 37\n    }\n  }, props.course.title.length < 124 ? props.course.title : props.course.title.substr(0, 124).concat('...')), __jsx(\"p\", {\n    className: styles.subtitle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 37\n    }\n  }, props.course.course_title.length < 32 ? props.course.course_title : props.course.course_title.substr(0, 32).concat('...')), __jsx(\"p\", {\n    className: styles.info_title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 37\n    }\n  }, props.course.addresses)), __jsx(\"div\", {\n    className: styles.linkButtonBody,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 33\n    }\n  }))), __jsx(Link, {\n    href: `/course/center/${encodeURIComponent(props.course.url)}?id=${encodeURIComponent(props.course.id)}`,\n    target: \"_blank\",\n    className: styles.noHover,\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    className: styles.noHover // onClick={async () => {\n    //     axios.post(`${globals.productionServerDomain}/logUserClick/`, {\n    //         datetime: getCurrentDateTime(),\n    //         courseTitle: props.course.course_title,\n    //         courseId: props.course.id,\n    //         subcourseTitle: props.course.title,\n    //         eventName: \"О курсе\"\n    //     });\n    // }}\n    ,\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 21\n    }\n  })), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, props.course.currency === '$' ? __jsx(\"p\", {\n    className: styles.info_price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 33\n    }\n  }, \"\\u0426\\u0435\\u043D\\u0430: \", props.course.currency, coursePrice, \"/\", props.course.unit_of_time) : __jsx(\"p\", {\n    className: styles.info_price,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 33\n    }\n  }, \"\\u0426\\u0435\\u043D\\u0430: \", coursePrice, \" \", props.course.currency, \"/\", props.course.unit_of_time)), __jsx(\"div\", {\n    style: {\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 21\n    }\n  }, applicationSent ? __jsx(\"p\", {\n    className: styles.applicationSentText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 33\n    }\n  }, \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0430!\") : __jsx(\"button\", {\n    onClick: async () => {\n      setShow(!show);\n      axios.post(globals.productionServerDomain + '/logUserClick', {\n        course_id: props.course.course_id,\n        card_id: props.course.id\n      });\n    },\n    className: styles.linkButton,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 33\n    }\n  }, \"\\u041E\\u0441\\u0442\\u0430\\u0432\\u0438\\u0442\\u044C \\u0437\\u0430\\u044F\\u0432\\u043A\\u0443\"), __jsx(\"a\", {\n    onClick: () => {\n      ym(78186067, 'reachGoal', 'whatsapp_click_center');\n      axios.post(globals.productionServerDomain + '/logUserClick', {\n        course_id: props.course.course_id,\n        card_id: props.course.id,\n        event_name: 'whatsapp'\n      });\n    },\n    href: `https://api.whatsapp.com/send?phone=${props.course.phones}&text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5%2C%20%D0%BF%D0%B8%D1%88%D1%83%20%D0%92%D0%B0%D0%BC%20%D1%81%20%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D1%8B%20Oilan, `,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 25\n    }\n  }, __jsx(\"div\", {\n    style: {\n      height: '100%',\n      width: 45,\n      marginLeft: 10,\n      borderRadius: 8,\n      backgroundImage: `url('/whatsapp_logo.png')`,\n      backgroundPosition: 'center',\n      backgroundRepeat: 'no-repeat',\n      backgroundSize: 'contain',\n      boxShadow: '0 0 1px grey',\n      backgroundColor: '#23d366'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 29\n    }\n  })))));\n}","map":{"version":3,"sources":["C:/Server/data/htdocs/oilan-mirror/goco/src/components/ModerateCourseCard/ModerateCourseCard.js"],"names":["styles","Link","React","useEffect","useState","SignupToCourseForm","ModalWindow","classnames","globals","Image","axios","require","default","ModerateCourseCard","props","show","setShow","showInfo","setShowInfo","showPhoneNumber","setShowPhoneNumber","showContacts","setShowContacts","handleClose","handleShow","promotions","setPromotions","stocks","setStocks","promotionsLoaded","setPromotionsLoaded","loadStocks","result","post","productionServerDomain","direction_id","data","i","length","center_id","course","course_id","push","showPromotions","setShowPromotions","promotionIndex","setPromotionIndex","wordsToShowLength","setWordsToShowLength","heartValue","setHeartValue","prettify","num","n","toString","replace","coursePrice","price","courseDescription","setCourseDecription","description","undefined","getCurrentDateTime","currentDate","Date","dd","getDate","mm","getMonth","yy","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","applicationSent","setApplicationSent","sendApplication","courseId","userInfo","city_id","category_id","name","fullName","phone","email","promocode","age","isOnline","format","role_id","method","url","headers","localStorageKeys","authToken","then","res","catch","alert","mobileVersion","setMobileVersion","window","innerWidth","console","log","container","width","application","textAlign","titleImage__Body","image_block","img_src","backgroundImage","backgroundPosition","backgroundSize","backgroundColor","border","verificated","backgroundRepeat","height","position","right","bottom","info_block","fullname","card_id","id","title","substr","concat","subtitle","course_title","info_title","addresses","linkButtonBody","encodeURIComponent","noHover","currency","info_price","unit_of_time","display","applicationSentText","linkButton","ym","event_name","phones","marginLeft","borderRadius","boxShadow"],"mappings":"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","sourcesContent":["import styles from '../../../styles/components/CourseCard.module.css'\r\nimport Link from \"next/link\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {SignupToCourseForm} from \"../Forms/SignupToCourseForm/SignupToCourseForm\";\r\nimport ModalWindow from \"../Modal/ModalWindow\";\r\nimport classnames from 'classnames';\r\nimport globals from \"../../globals\";\r\nimport Image from \"next/image\";\r\n\r\nconst axios = require('axios').default;\r\n\r\nexport default function ModerateCourseCard(props) {\r\n    const [show, setShow] = useState(false);\r\n    const [showInfo, setShowInfo] = useState(false);\r\n    const [showPhoneNumber, setShowPhoneNumber] = useState(false);\r\n    const [showContacts, setShowContacts] = useState(false)\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const [promotions, setPromotions] = useState([])\r\n    const [stocks, setStocks] = useState([]);\r\n    const [promotionsLoaded, setPromotionsLoaded] = useState(false)\r\n    const loadStocks = async () => {\r\n        let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {direction_id: 0});\r\n        setStocks(result.data);\r\n        for(let i=0;i<result.data.length;i++){\r\n            if(result.data[i].center_id === props.course.course_id){\r\n                promotions.push(result.data[i])\r\n            }\r\n        }\r\n        setPromotions(promotions)\r\n        if(result.data.length > 0){\r\n            setPromotionsLoaded(true)\r\n        } else {\r\n            setPromotionsLoaded(false)\r\n        }\r\n\r\n    }\r\n    const [showPromotions, setShowPromotions] = useState(false)\r\n    const [promotionIndex, setPromotionIndex] = useState(0)\r\n\r\n    const [wordsToShowLength, setWordsToShowLength] = useState(10)\r\n    const [heartValue, setHeartValue] = useState('\\u2661')\r\n\r\n\r\n    function prettify(num) {\r\n        var n = num.toString();\r\n        return n.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + ' ');\r\n    }\r\n\r\n    const coursePrice = prettify(props.course.price)\r\n    const [courseDescription, setCourseDecription] = useState(props.course.description === undefined ? \"\" : props.course.description)\r\n\r\n    const getCurrentDateTime = () => {\r\n        let currentDate = new Date();\r\n\r\n        let dd = currentDate.getDate();\r\n        if(dd < 10) dd = '0' + dd;\r\n\r\n        let mm = currentDate.getMonth()+1;\r\n        if(mm < 10) mm = '0' + mm;\r\n\r\n        let yy = currentDate.getFullYear();\r\n\r\n        let hours = currentDate.getHours();\r\n        let min = currentDate.getMinutes();\r\n        let sec = currentDate.getSeconds();\r\n\r\n        return yy + \"-\" + mm + \"-\" + dd + \" \" + hours + \":\" + min + \":\" + sec;\r\n    }\r\n\r\n    const [applicationSent, setApplicationSent] = useState(false);\r\n\r\n    const sendApplication = (courseId, userInfo) => {\r\n        let data = {\r\n            city_id: props.course.city_id,\r\n            direction_id: props.course.category_id || props.course.direction_id,\r\n            name: userInfo.fullName,\r\n            phone: userInfo.phone,\r\n            email: userInfo.email,\r\n            promocode: userInfo.promocode,\r\n            age: 0,\r\n            isOnline: props.course.format !== 'Offline',\r\n            course_id: props.course.course_id,\r\n            role_id: 4\r\n        };\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: `${globals.productionServerDomain}/createCourseSearchTicket`,\r\n            data: data,\r\n            headers: {\r\n                'Authorization': `Bearer ${globals.localStorageKeys.authToken}`\r\n            }\r\n        }).then(function(res){\r\n\r\n        }).catch(() => {\r\n            alert('Что-то пошло нетак!');\r\n        });\r\n    }\r\n\r\n    const [mobileVersion, setMobileVersion] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        if (window.innerWidth <= 761){\r\n            setMobileVersion(true)\r\n            console.log('mob version ' + true)\r\n        } else {\r\n            setMobileVersion(false)\r\n            console.log('mob version ' + false)\r\n        }\r\n        loadStocks()\r\n    }, [])\r\n\r\n    return (\r\n            <div className={styles.container} style={{width: props.application !== undefined ? '40%' : null}} >\r\n                        <div style={{width: '100%'}}>\r\n                            <div style={{textAlign: 'center'}}>\r\n                                {/*<p className={styles.course_title}>{props.course.course_title}</p>*/}\r\n                            </div>\r\n                            <div className={styles.titleImage__Body}>\r\n                                {\r\n                                    showPromotions===false &&\r\n                                    <div className={styles.image_block} style={props.course.img_src?\r\n                                    {\r\n                                        backgroundImage: `url(${props.course.img_src})`,\r\n                                        backgroundPosition: 'center',\r\n                                        backgroundSize: 'cover',\r\n                                        backgroundColor: 'white',\r\n                                        border: '1px solid white'\r\n                                    }:{\r\n                                        backgroundImage: `url('https://realibi.kz/file/510188.jpg')`,\r\n                                        backgroundPosition: 'center',\r\n                                        backgroundSize: 'cover',\r\n                                        backgroundColor: 'white',\r\n                                        border: '1px solid white'\r\n                                    }}>\r\n                                    </div>\r\n                                }\r\n                                    <div style={props.course.verificated?\r\n                                        {\r\n                                            backgroundSize: '70% 90%',\r\n                                            backgroundPosition: 'center',\r\n                                            backgroundRepeat: 'no-repeat',\r\n                                            height: '72px',\r\n                                            width: '72px',\r\n                                            position: 'absolute',\r\n                                            right: '5px',\r\n                                            backgroundImage: 'url(https://realibi.kz/file/777788.png)',\r\n                                            bottom: '15px'\r\n                                        }:{\r\n                                            backgroundSize: '70% 90%',\r\n                                            backgroundPosition: 'center',\r\n                                            backgroundRepeat: 'no-repeat',\r\n                                            height: '72px',\r\n                                            width: '72px',\r\n                                            position: 'absolute',\r\n                                            right: '5px',\r\n                                            bottom: '15px'\r\n                                        }}></div>\r\n                            </div>\r\n\r\n                            <div className={styles.info_block}>\r\n                                <div>\r\n\r\n                                    <p className={styles.fullname}\r\n                                       onClick={() => {\r\n                                           axios.post(globals.productionServerDomain + '/logUserClick',{\r\n                                               course_id: props.course.course_id,\r\n                                               card_id: props.course.id\r\n                                           })\r\n                                       }}\r\n                                    >\r\n                                        {props.course.title.length < 124 ? (props.course.title) : (props.course.title.substr(0, 124).concat('...'))}\r\n                                    </p>\r\n                                    <p className={styles.subtitle}>\r\n                                        {props.course.course_title.length < 32 ? (props.course.course_title) : (props.course.course_title.substr(0, 32).concat('...'))}\r\n                                    </p>\r\n                                    <p className={styles.info_title}>{props.course.addresses}</p>\r\n                                    \r\n                                </div>\r\n\r\n                                <div className={styles.linkButtonBody}>\r\n                                \r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    \r\n              \r\n\r\n                <Link\r\n                    href={`/course/center/${encodeURIComponent(props.course.url)}?id=${encodeURIComponent(props.course.id)}`}\r\n                    target=\"_blank\" className={styles.noHover}\r\n                    style={{height: '100%'}}\r\n                >\r\n                    <a\r\n                        className={styles.noHover}\r\n                        // onClick={async () => {\r\n                        //     axios.post(`${globals.productionServerDomain}/logUserClick/`, {\r\n                        //         datetime: getCurrentDateTime(),\r\n                        //         courseTitle: props.course.course_title,\r\n                        //         courseId: props.course.id,\r\n                        //         subcourseTitle: props.course.title,\r\n                        //         eventName: \"О курсе\"\r\n                        //     });\r\n                        // }}\r\n                        style={{height: '100%'}}\r\n                    >\r\n                    </a>\r\n                </Link>\r\n\r\n                <div>\r\n                    <div>\r\n                        {props.course.currency === '$' ?\r\n                            (\r\n                                <p className={styles.info_price}>Цена: {props.course.currency}{coursePrice}/{props.course.unit_of_time}</p>\r\n                            )\r\n                            : (\r\n                                <p className={styles.info_price}>Цена: {coursePrice} {props.course.currency}/{props.course.unit_of_time}</p>\r\n                            )\r\n                        }\r\n                    </div>\r\n\r\n                    <div\r\n                        style={{\r\n                            display: 'flex'\r\n                        }}\r\n                    >\r\n                        {\r\n                            applicationSent ? (\r\n                                <p className={styles.applicationSentText}>Заявка отправлена!</p>\r\n                            ) : (\r\n                                <button onClick={async () => {\r\n                                    setShow(!show)\r\n                                    axios.post(globals.productionServerDomain + '/logUserClick',{\r\n                                        course_id: props.course.course_id,\r\n                                        card_id: props.course.id\r\n                                    })\r\n                                }} className={styles.linkButton}>Оставить заявку</button>\r\n                            )\r\n                        }\r\n\r\n                        <a\r\n                            onClick={() => {\r\n                                ym(78186067,'reachGoal','whatsapp_click_center');\r\n                                axios.post(globals.productionServerDomain + '/logUserClick',{\r\n                                    course_id: props.course.course_id,\r\n                                    card_id: props.course.id,\r\n                                    event_name: 'whatsapp'\r\n                                })\r\n                            }}\r\n                            href={`https://api.whatsapp.com/send?phone=${props.course.phones}&text=%D0%97%D0%B4%D1%80%D0%B0%D0%B2%D1%81%D1%82%D0%B2%D1%83%D0%B9%D1%82%D0%B5%2C%20%D0%BF%D0%B8%D1%88%D1%83%20%D0%92%D0%B0%D0%BC%20%D1%81%20%D0%BF%D0%BB%D0%B0%D1%82%D1%84%D0%BE%D1%80%D0%BC%D1%8B%20Oilan, `}>\r\n                            <div\r\n                                style={{\r\n                                    height: '100%',\r\n                                    width: 45,\r\n                                    marginLeft: 10,\r\n                                    borderRadius: 8,\r\n                                    backgroundImage: `url('/whatsapp_logo.png')`,\r\n                                    backgroundPosition: 'center',\r\n                                    backgroundRepeat: 'no-repeat',\r\n                                    backgroundSize: 'contain',\r\n                                    boxShadow: '0 0 1px grey',\r\n                                    backgroundColor: '#23d366'\r\n                                }}\r\n                            >\r\n                            </div>\r\n                        </a>\r\n\r\n                    </div>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}