{"ast":null,"code":"import _slicedToArray from \"C:/Server/data/htdocs/oilanio-mirror-agarey/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\n\nvar _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilanio-mirror-agarey\\\\src\\\\components\\\\Application\\\\index.js\",\n    _s2 = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport styles from './style.module.css';\nimport ModalWindow from \"../Modal/ModalWindow\";\nimport { CardPickForm } from \"../Forms/CardPickForm/CardPickForm\";\nimport React, { useState } from \"react\";\nimport classnames from 'classnames';\nimport SubscriptionPaymentForm from \"../Forms/SubscriptionPaymentForm/SubscriptionPaymentForm\";\nexport default function Application(props) {\n  _s2();\n\n  var _this = this,\n      _s = $RefreshSig$();\n\n  var application = props.application;\n\n  var _useState = useState(false),\n      showCardPickModal = _useState[0],\n      setCardPickModal = _useState[1];\n\n  var _useState2 = useState(false),\n      showPaymentModal = _useState2[0],\n      setShowPaymentModal = _useState2[1];\n\n  var handleCardPickModalClose = function handleCardPickModalClose() {\n    return setCardPickModal(false);\n  };\n\n  var handlePaymentModalClose = function handlePaymentModalClose() {\n    return setShowPaymentModal(false);\n  };\n\n  var CountDown = function CountDown(_ref) {\n    _s();\n\n    var _ref$hours = _ref.hours,\n        hours = _ref$hours === void 0 ? 0 : _ref$hours,\n        _ref$minutes = _ref.minutes,\n        minutes = _ref$minutes === void 0 ? 0 : _ref$minutes,\n        _ref$seconds = _ref.seconds,\n        seconds = _ref$seconds === void 0 ? 0 : _ref$seconds;\n\n    var _React$useState = React.useState(false),\n        _React$useState2 = _slicedToArray(_React$useState, 2),\n        over = _React$useState2[0],\n        setOver = _React$useState2[1];\n\n    var _React$useState3 = React.useState([hours, minutes, seconds]),\n        _React$useState4 = _slicedToArray(_React$useState3, 2),\n        _React$useState4$ = _slicedToArray(_React$useState4[0], 3),\n        h = _React$useState4$[0],\n        m = _React$useState4$[1],\n        s = _React$useState4$[2],\n        setTime = _React$useState4[1];\n\n    var tick = function tick() {\n      if (over) return;\n\n      if (h === 0 && m === 0 && s === 0) {\n        setOver(true);\n      } else if (m === 0 && s === 0) {\n        setTime([h - 1, 59, 59]);\n      } else if (s == 0) {\n        setTime([h, m - 1, 59]);\n      } else {\n        setTime([h, m, s - 1]);\n      }\n    };\n\n    React.useEffect(function () {\n      var timerID = setInterval(function () {\n        return tick();\n      }, 1000);\n      return function () {\n        return clearInterval(timerID);\n      };\n    });\n    return __jsx(\"span\", {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }\n    }, \"\".concat(h.toString().padStart(2, '0'), \":\").concat(m.toString().padStart(2, '0'), \":\").concat(s.toString().padStart(2, '0')));\n  };\n\n  _s(CountDown, \"V5awK7SVtKbFwm9+Qi6isS50dVk=\");\n\n  return new Date(application.datetime).getTime() + 86400000 > new Date().getTime() ? __jsx(React.Fragment, null, __jsx(ModalWindow, {\n    show: showPaymentModal,\n    handleClose: handlePaymentModalClose,\n    heading: 'Приобретите подписку для возможности откликнуться на заявку!',\n    body: __jsx(SubscriptionPaymentForm, {\n      handleClose: handlePaymentModalClose,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 167\n      }\n    }),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), __jsx(ModalWindow, {\n    show: showCardPickModal,\n    handleClose: handleCardPickModalClose,\n    heading: 'Созвонитесь с клиентом!',\n    body: __jsx(\"p\", {\n      style: {\n        color: '#000'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 23\n      }\n    }, application.phone),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    className: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: styles.name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 17\n    }\n  }, application.name), __jsx(\"p\", {\n    className: styles.direction,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, props.categoryName), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 20\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430 \\u0441: \"), application.datetime.toLocaleString().replace(/^([^T]+)T(.+)$/, '$1').replace(/^(\\d+)-(\\d+)-(\\d+)$/, '$3.$2.$1')), __jsx(\"p\", {\n    className: styles.application_item_text,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 17\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 33\n    }\n  }, \"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C: \"), __jsx(CountDown, {\n    hours: Math.floor((new Date(application.datetime).getTime() + 86400000 - new Date().getTime()) / 1000 / 60 / 60),\n    minutes: Math.floor((new Date(application.datetime).getTime() + 86400000 - new Date().getTime()) / 1000 / 60) % 60,\n    seconds: Math.floor((new Date(application.datetime).getTime() + 86400000 - new Date().getTime()) / 1000) % 60,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 50\n    }\n  })), application.is_active ? __jsx(\"button\", {\n    className: styles.button,\n    onClick: function onClick() {\n      if (props.subscriptionInfo.permitted) {\n        setCardPickModal(true);\n      } else {\n        setShowPaymentModal(true);\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 21\n    }\n  }, \"\\u041F\\u043E\\u043A\\u0430\\u0437\\u0430\\u0442\\u044C \\u043D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430\") : __jsx(\"button\", {\n    disabled: true,\n    className: classnames(styles.button, styles.deactivated_card_button),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 21\n    }\n  }, \"\\u0417\\u0430\\u044F\\u0432\\u043A\\u0430 \\u0443\\u0436\\u0435 \\u043D\\u0435\\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u0430!\"))) : __jsx(React.Fragment, null);\n}\n\n_s2(Application, \"MTJ83ucItlXo6NJ4ZvgKzBnat44=\");\n\n_c = Application;\n\nvar _c;\n\n$RefreshReg$(_c, \"Application\");","map":{"version":3,"sources":["C:/Server/data/htdocs/oilanio-mirror-agarey/src/components/Application/index.js"],"names":["styles","ModalWindow","CardPickForm","React","useState","classnames","SubscriptionPaymentForm","Application","props","application","showCardPickModal","setCardPickModal","showPaymentModal","setShowPaymentModal","handleCardPickModalClose","handlePaymentModalClose","CountDown","hours","minutes","seconds","over","setOver","h","m","s","setTime","tick","useEffect","timerID","setInterval","clearInterval","toString","padStart","Date","datetime","getTime","color","phone","container","name","direction","categoryName","toLocaleString","replace","application_item_text","Math","floor","is_active","button","subscriptionInfo","permitted","deactivated_card_button"],"mappings":"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","sourcesContent":["import styles from './style.module.css'\r\nimport ModalWindow from \"../Modal/ModalWindow\";\r\nimport {CardPickForm} from \"../Forms/CardPickForm/CardPickForm\";\r\nimport React, {useState} from \"react\";\r\nimport classnames from 'classnames';\r\nimport SubscriptionPaymentForm from \"../Forms/SubscriptionPaymentForm/SubscriptionPaymentForm\";\r\n\r\nexport default function Application(props){\r\n    const application = props.application;\r\n\r\n    const [showCardPickModal, setCardPickModal] = useState(false);\r\n    const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n\r\n    const handleCardPickModalClose = () => setCardPickModal(false);\r\n    const handlePaymentModalClose = () => setShowPaymentModal(false);\r\n    const CountDown = ({ hours = 0, minutes = 0, seconds = 0 }) => {\r\n  \r\n    const [over, setOver] = React.useState(false);\r\n    const [[h, m, s], setTime] = React.useState([hours, minutes, seconds]);\r\n\r\n    const tick = () => {\r\n        if (over) return;\r\n\r\n        if (h === 0 && m === 0 && s === 0) {\r\n            setOver(true);\r\n        } else if (m === 0 && s === 0) {\r\n            setTime([h - 1, 59, 59]);\r\n        } else if (s == 0) {\r\n            setTime([h, m - 1, 59]);\r\n        } else {\r\n            setTime([h, m, s - 1]);\r\n        }\r\n    };\r\n\r\n\r\n    React.useEffect(() => {\r\n        const timerID = setInterval(() => tick(), 1000);\r\n        return () => clearInterval(timerID);\r\n    });\r\n\r\n    return (\r\n        <span>\r\n            {`${h.toString().padStart(2, '0')}:${m\r\n                .toString()\r\n                .padStart(2, '0')}:${s.toString().padStart(2, '0')}`}\r\n        </span>\r\n        );\r\n    };\r\n    return((new Date(application.datetime).getTime() + 86400000) > (new Date().getTime())?(\r\n        <>\r\n            <ModalWindow show={showPaymentModal} handleClose={handlePaymentModalClose} heading={'Приобретите подписку для возможности откликнуться на заявку!'} body={<SubscriptionPaymentForm handleClose={handlePaymentModalClose}/>}/>\r\n            <ModalWindow\r\n                show={showCardPickModal}\r\n                handleClose={handleCardPickModalClose}\r\n                heading={'Созвонитесь с клиентом!'}\r\n                body={<p style={{color: '#000'}}>{application.phone}</p>}\r\n            />\r\n\r\n            <div className={styles.container}>\r\n                <p className={styles.name}>{application.name}</p>\r\n                <p className={styles.direction}>{props.categoryName}</p>\r\n                <p><b>Активна с: </b>{application.datetime.toLocaleString().replace(/^([^T]+)T(.+)$/,'$1').replace(/^(\\d+)-(\\d+)-(\\d+)$/,'$3.$2.$1')}</p>\r\n                <p className={styles.application_item_text}>\r\n                                <b>Осталось: </b><CountDown \r\n                                hours={Math.floor((((new Date(application.datetime).getTime()) + 86400000)-(new Date().getTime()))/1000/60/60)} \r\n                                minutes={Math.floor((((new Date(application.datetime).getTime()) + 86400000)-(new Date().getTime()))/1000/60)%60}\r\n                                seconds={Math.floor((((new Date(application.datetime).getTime()) + 86400000)-(new Date().getTime()))/1000)%60} />\r\n                                \r\n                            </p>\r\n                {application.is_active ? (\r\n                    <button\r\n                        className={styles.button}\r\n                        onClick={() => {\r\n                            if(props.subscriptionInfo.permitted){\r\n                                setCardPickModal(true);\r\n                            }else{\r\n                                setShowPaymentModal(true)\r\n                            }\r\n                        }}\r\n                    >Показать номер телефона</button>\r\n                ) : (\r\n                    <button\r\n                        disabled={true}\r\n                        className={classnames(styles.button, styles.deactivated_card_button)}\r\n                    >Заявка уже неактивна!</button>\r\n                )}\r\n\r\n            </div>\r\n        </>):(<></>)\r\n    );\r\n}"]},"metadata":{},"sourceType":"module"}