{"ast":null,"code":"import _regeneratorRuntime from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilan-mirror\\\\goco\\\\src\\\\components\\\\ModeratorBlock\\\\ModeratorBlock.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport styles from './ModeratorBlock.module.css';\nimport Head from 'next/head';\nimport React, { useEffect, useState } from \"react\";\nimport { default as axios } from \"axios\";\nimport globals from \"../../globals\";\nimport { useRouter } from \"next/router\";\nimport { Image } from \"react-bootstrap\";\nimport LoadingBlock from \"../LoadingBlock\";\nimport coursesStyles from \"../../../styles/components/content/Courses.module.css\";\nimport ModerateCourseCard from \"../ModerateCourseCard/ModerateCourseCard\";\nimport LurkingFilterBlock from \"../LurkingFilterBlock\";\nimport CourseSearchResultIsNotDefind from \"../CourseSearchResultIsNotDefind\";\n\nvar ModeratorBlock = function ModeratorBlock() {\n  _s();\n\n  var router = useRouter();\n\n  var _useState = useState([]),\n      imagesBase = _useState[0],\n      setImagesBase = _useState[1];\n\n  var loadCourseCards = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(directionId) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setCoursesLoading(true);\n              _context.next = 3;\n              return axios.get(\"\".concat(globals.productionServerDomain, \"/courseCards/\"));\n\n            case 3:\n              result = _context.sent;\n              setCourseCards(result.data);\n              console.log('courseCards', result.data);\n              setShowUps(true);\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadCourseCards(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var loadFilters = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              setFiltersLoading(true);\n              _context2.next = 3;\n              return axios.get(\"\".concat(globals.productionServerDomain, \"/filters\"));\n\n            case 3:\n              result = _context2.sent;\n              setFilters(result.data);\n              setFiltersLoading(false);\n\n            case 6:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function loadFilters() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var loadStocks = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              setStocksLoading(true);\n              _context3.next = 3;\n              return axios.post(\"\".concat(globals.productionServerDomain, \"/loadDirectionPromotions\"), {\n                direction_id: 0\n              });\n\n            case 3:\n              result = _context3.sent;\n              setStocks(result.data);\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function loadStocks() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  var redCards = /*#__PURE__*/function () {\n    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n      return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n        while (1) {\n          switch (_context4.prev = _context4.next) {\n            case 0:\n              courseCards.map(function (course) {\n                var redCount = 0;\n\n                if (!course.title || !course.addresses || !course.ages || !course.category || !course.course_desc || !course.course_title || !course.description || !course.format || !course.img_src || !course.phones || !course.price || !course.schedule || !course.type) {\n                  redCount = redCount + 1;\n                }\n\n                return redCount;\n              });\n\n            case 1:\n            case \"end\":\n              return _context4.stop();\n          }\n        }\n      }, _callee4);\n    }));\n\n    return function redCards() {\n      return _ref4.apply(this, arguments);\n    };\n  }();\n\n  console.log(redCount);\n\n  var _useState2 = useState(false),\n      stocksLoading = _useState2[0],\n      setStocksLoading = _useState2[1];\n\n  var _useState3 = useState(false),\n      filtersLoading = _useState3[0],\n      setFiltersLoading = _useState3[1];\n\n  var _useState4 = useState(false),\n      coursesLoading = _useState4[0],\n      setCoursesLoading = _useState4[1];\n\n  var _useState5 = useState(false),\n      loadingModal = _useState5[0],\n      setLoadingModal = _useState5[1];\n\n  var _useState6 = useState(false),\n      redCheck = _useState6[0],\n      setRedCheck = _useState6[1];\n\n  var _useState7 = useState(false),\n      yellowCheck = _useState7[0],\n      setYellowCheck = _useState7[1];\n\n  var _useState8 = useState(true),\n      allCards = _useState8[0],\n      setAllCards = _useState8[1];\n\n  var _useState9 = useState(false),\n      showUps = _useState9[0],\n      setShowUps = _useState9[1];\n\n  var _useState10 = useState([]),\n      filters = _useState10[0],\n      setFilters = _useState10[1];\n\n  var _useState11 = useState([]),\n      stocks = _useState11[0],\n      setStocks = _useState11[1];\n\n  var _useState12 = useState([]),\n      courseCards = _useState12[0],\n      setCourseCards = _useState12[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n    var imagesBaseResponse;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.next = 2;\n            return axios.get(\"\".concat(globals.productionServerDomain, \"/imagesBase\"));\n\n          case 2:\n            imagesBaseResponse = _context5.sent;\n            setImagesBase(imagesBaseResponse.data);\n            setCoursesLoading(true);\n            loadFilters();\n            loadCourseCards().then(function () {\n              return setCoursesLoading(false);\n            });\n            loadStocks().then(function () {\n              return setStocksLoading(false);\n            });\n            window.scrollTo(0, 0);\n\n          case 9:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  })), []);\n\n  function componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  return __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }, __jsx(\"p\", {\n    className: styles.moderate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 44\n    }\n  }, \"\\u0412\\u0441\\u0435 \\u043A\\u0430\\u0440\\u0442\\u043E\\u0447\\u043A\\u0438 (\", courseCards.length, \"):\"), __jsx(\"input\", {\n    type: \"radio\",\n    onClick: function onClick() {\n      setAllCards(true);\n      setRedCheck(false);\n      setYellowCheck(false);\n    },\n    checked: allCards,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 25\n    }\n  })), __jsx(\"p\", {\n    className: styles.moderate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 44\n    }\n  }, \"\\u0421 \\u043D\\u0435\\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043D\\u044B\\u043C\\u0438 \\u043F\\u043E\\u043B\\u044F\\u043C\\u0438:\"), __jsx(\"input\", {\n    type: \"radio\",\n    onClick: function onClick() {\n      setRedCheck(true);\n      setAllCards(false);\n      setYellowCheck(false);\n    },\n    checked: redCheck,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  })), __jsx(\"p\", {\n    className: styles.moderate,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 44\n    }\n  }, \"\\u0421 \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u044B\\u043C\\u0438 \\u0438\\u043B\\u0438 \\u043F\\u043E\\u0432\\u0442\\u043E\\u0440\\u044F\\u044E\\u0449\\u0438\\u043C\\u0438\\u0441\\u044F \\u043F\\u043E\\u043B\\u044F\\u043C\\u0438:\"), __jsx(\"input\", {\n    type: \"radio\",\n    onClick: function onClick() {\n      setYellowCheck(true);\n      setAllCards(false);\n      setRedCheck(false);\n    },\n    checked: yellowCheck,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 25\n    }\n  })), courseCards.length > 0 && __jsx(\"div\", {\n    className: styles.courses_block,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 21\n    }\n  }, courseCards.map(function (course) {\n    var str = String(course.img_src);\n    var substr = 'realibi';\n    var checkLink = str.includes(substr);\n\n    if (course.title !== 'test') {\n      if (redCheck == true) {\n        if (!course.title || !course.addresses || !course.ages || !course.category || !course.course_desc || !course.course_title || !course.description || !course.format || !course.img_src || !course.phones || !course.price || !course.schedule || !course.type) {\n          return __jsx(\"div\", {\n            style: {\n              marginLeft: '5%',\n              marginRight: '5%'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 49\n            }\n          }, __jsx(ModerateCourseCard, {\n            coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n            setLoadingModal: setLoadingModal,\n            course: course,\n            showApplicationModal: true,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127,\n              columnNumber: 53\n            }\n          }));\n        }\n      }\n\n      if (yellowCheck == true) {\n        if (course.title == course.description && course.title || course.title == course.course_desc && course.title || course.description == course.course_desc && course.description || course.ages == \" - \" || course.img_src && !checkLink) {\n          return __jsx(\"div\", {\n            style: {\n              marginLeft: '5%',\n              marginRight: '5%'\n            },\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135,\n              columnNumber: 49\n            }\n          }, __jsx(ModerateCourseCard, {\n            coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n            setLoadingModal: setLoadingModal,\n            course: course,\n            showApplicationModal: true,\n            __self: _this,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 53\n            }\n          }));\n        }\n      }\n\n      if (allCards == true) {\n        return __jsx(\"div\", {\n          style: {\n            marginLeft: '5%',\n            marginRight: '5%'\n          },\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 41\n          }\n        }, __jsx(ModerateCourseCard, {\n          coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n          setLoadingModal: setLoadingModal,\n          course: course,\n          showApplicationModal: true,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 45\n          }\n        }));\n      }\n    }\n  })), coursesLoading ? __jsx(LoadingBlock, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 35\n    }\n  }) : showUps && (courseCards.length < 1 ? __jsx(CourseSearchResultIsNotDefind, {\n    catalog: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 58\n    }\n  }) : null));\n};\n\n_s(ModeratorBlock, \"Ryqr32WqkEhtRWktCJN73hkCCHo=\", false, function () {\n  return [useRouter];\n});\n\n_c = ModeratorBlock;\nexport default ModeratorBlock;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModeratorBlock\");","map":{"version":3,"sources":["C:/Server/data/htdocs/oilan-mirror/goco/src/components/ModeratorBlock/ModeratorBlock.js"],"names":["styles","Head","React","useEffect","useState","default","axios","globals","useRouter","Image","LoadingBlock","coursesStyles","ModerateCourseCard","LurkingFilterBlock","CourseSearchResultIsNotDefind","ModeratorBlock","router","imagesBase","setImagesBase","loadCourseCards","directionId","setCoursesLoading","get","productionServerDomain","result","setCourseCards","data","console","log","setShowUps","loadFilters","setFiltersLoading","setFilters","loadStocks","setStocksLoading","post","direction_id","setStocks","redCards","courseCards","map","course","redCount","title","addresses","ages","category","course_desc","course_title","description","format","img_src","phones","price","schedule","type","stocksLoading","filtersLoading","coursesLoading","loadingModal","setLoadingModal","redCheck","setRedCheck","yellowCheck","setYellowCheck","allCards","setAllCards","showUps","filters","stocks","imagesBaseResponse","then","window","scrollTo","componentDidMount","moderate","length","courses_block","str","String","substr","checkLink","includes","marginLeft","marginRight","Math","floor","random","src"],"mappings":"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","sourcesContent":["import styles from './ModeratorBlock.module.css'\r\nimport Head from 'next/head'\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {default as axios} from \"axios\";\r\nimport globals from \"../../globals\";\r\nimport {useRouter} from \"next/router\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport LoadingBlock from \"../LoadingBlock\";\r\nimport coursesStyles from \"../../../styles/components/content/Courses.module.css\";\r\nimport ModerateCourseCard from \"../ModerateCourseCard/ModerateCourseCard\";\r\nimport LurkingFilterBlock from \"../LurkingFilterBlock\";\r\nimport CourseSearchResultIsNotDefind from \"../CourseSearchResultIsNotDefind\";\r\n\r\nconst ModeratorBlock = () => {\r\n    const router = useRouter();\r\n\r\n\r\n\r\n    const [imagesBase, setImagesBase] = useState([]);\r\n    const loadCourseCards = async (directionId) => {\r\n        setCoursesLoading(true)\r\n        let result = await axios.get(`${globals.productionServerDomain}/courseCards/`);\r\n        setCourseCards(result.data);\r\n        console.log('courseCards', result.data)\r\n        setShowUps(true)\r\n    }\r\n    const loadFilters = async () => {\r\n        setFiltersLoading(true)\r\n        let result = await axios.get(`${globals.productionServerDomain}/filters`);\r\n        setFilters(result.data)\r\n        setFiltersLoading(false)\r\n    }\r\n    const loadStocks = async () => {\r\n        setStocksLoading(true)\r\n        let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {direction_id: 0});\r\n        setStocks(result.data);\r\n    }\r\n    const redCards = async () => {\r\n        courseCards.map(course => {\r\n            let redCount = 0\r\n            if (!course.title || !course.addresses || !course.ages || !course.category || !course.course_desc || !course.course_title || !course.description || !course.format || !course.img_src || !course.phones || !course.price || !course.schedule || !course.type) {\r\n                redCount = redCount + 1\r\n            }\r\n            return redCount\r\n        })\r\n    }\r\n    console.log(redCount)\r\n    const [stocksLoading, setStocksLoading] = useState(false);\r\n    const [filtersLoading, setFiltersLoading] = useState(false);\r\n    const [coursesLoading, setCoursesLoading] = useState(false);\r\n    const [loadingModal, setLoadingModal] = useState(false);\r\n    const [redCheck, setRedCheck] = useState(false);\r\n    const [yellowCheck, setYellowCheck] = useState(false);\r\n    const [allCards, setAllCards] = useState(true);\r\n    const [showUps, setShowUps] = useState(false)\r\n\r\n    const [filters, setFilters] = useState([]);\r\n    const [stocks, setStocks] = useState([]);\r\n    const [courseCards, setCourseCards] = useState([]);\r\n\r\n    useEffect(async () => {\r\n        let imagesBaseResponse = await axios.get(`${globals.productionServerDomain}/imagesBase`);\r\n        setImagesBase(imagesBaseResponse.data);\r\n        setCoursesLoading(true);\r\n        loadFilters();\r\n        loadCourseCards().then(() => setCoursesLoading(false));\r\n        loadStocks().then(() => setStocksLoading(false));\r\n        window.scrollTo(0, 0);\r\n    }, [])\r\n\r\n    function componentDidMount() {\r\n        window.scrollTo(0, 0);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <p className={styles.moderate}><b>Все карточки ({courseCards.length}):</b> \r\n                        <input\r\n                            type=\"radio\"\r\n                            onClick={() => {\r\n                                setAllCards(true);\r\n                                setRedCheck(false);\r\n                                setYellowCheck(false);\r\n                                }\r\n                            }\r\n                            checked={allCards}\r\n                        />\r\n            </p>\r\n            <p className={styles.moderate}><b>С незаполненными полями:</b> \r\n                        <input\r\n                            type=\"radio\"\r\n                            onClick={() => {\r\n                                setRedCheck(true);\r\n                                setAllCards(false);\r\n                                setYellowCheck(false);\r\n                                }\r\n                            }\r\n                            checked={redCheck}\r\n                        />\r\n            </p>\r\n            <p className={styles.moderate}><b>С неверными или повторяющимися полями:</b> \r\n                        <input\r\n                            type=\"radio\"\r\n                            onClick={() => {\r\n                                setYellowCheck(true);\r\n                                setAllCards(false);\r\n                                setRedCheck(false);\r\n                                }\r\n                            }\r\n                            checked={yellowCheck}\r\n                        />\r\n            </p>\r\n\r\n            {\r\n                courseCards.length > 0 && (\r\n                    <div className={styles.courses_block}>\r\n                        {\r\n                            courseCards.map(course => {\r\n                                const str = String(course.img_src);\r\n                                const substr = 'realibi';\r\n                                const checkLink = str.includes(substr);\r\n                                if(course.title !== 'test'){\r\n                                    if (redCheck == true) {\r\n                                        if (!course.title || !course.addresses || !course.ages || !course.category || !course.course_desc || !course.course_title || !course.description || !course.format || !course.img_src || !course.phones || !course.price || !course.schedule || !course.type){\r\n                                            return (\r\n                                                <div style={{marginLeft: '5%', marginRight: '5%'}}>\r\n                                                    <ModerateCourseCard coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} setLoadingModal={setLoadingModal} course={course} showApplicationModal={true}/>\r\n                                                </div>\r\n                                            )\r\n                                        }\r\n                                    }\r\n                                    if (yellowCheck == true) {\r\n                                        if (((course.title == course.description) && course.title) || ((course.title == course.course_desc) && course.title) || ((course.description == course.course_desc) && course.description) || course.ages == \" - \" || (course.img_src && !checkLink)){\r\n                                            return (\r\n                                                <div style={{marginLeft: '5%', marginRight: '5%'}}>\r\n                                                    <ModerateCourseCard coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} setLoadingModal={setLoadingModal} course={course} showApplicationModal={true}/>\r\n                                                </div>\r\n                                            )\r\n                                        }\r\n                                    }\r\n                                    if (allCards == true) {\r\n                                        return (\r\n                                        <div style={{marginLeft: '5%', marginRight: '5%'}}>\r\n                                            <ModerateCourseCard coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} setLoadingModal={setLoadingModal} course={course} showApplicationModal={true}/>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n\r\n\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                )\r\n            }\r\n            {\r\n                coursesLoading ? (<LoadingBlock/> ) : (\r\n                    showUps && (courseCards.length < 1 ? <CourseSearchResultIsNotDefind catalog={true}/> : null)\r\n                )\r\n            }\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default ModeratorBlock;\r\n"]},"metadata":{},"sourceType":"module"}