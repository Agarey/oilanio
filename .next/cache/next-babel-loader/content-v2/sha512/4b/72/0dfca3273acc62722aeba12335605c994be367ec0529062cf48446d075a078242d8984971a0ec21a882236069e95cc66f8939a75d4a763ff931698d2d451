{"ast":null,"code":"import _regeneratorRuntime from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilan-mirror\\\\goco\\\\src\\\\components\\\\ModeratorBlock\\\\ModeratorBlock.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport Head from 'next/head';\nimport styles from \"./ModeratorBlock.module.css\";\nimport CourseCard from \"../CourseCard/CourseCard\";\nimport HorizontalLine from \"../HorizontalLine/HorizaontalLine\";\nimport React, { useState, useEffect } from \"react\";\nimport Slider from 'react-animated-slider';\nimport 'react-animated-slider/build/horizontal.css';\nimport StockCard from \"../StockCard/StockCard\";\nimport ContactButton from \"../ContactButton/ContactButton\";\nimport { useContext } from \"react\";\nimport UserContext from \"../../userContext\";\nimport globals from \"../../globals\";\nimport EditCourseCard from \"../EditCourseCard/EditCourseCard\";\nimport Loading from \"../Loading/Loading\";\nimport classnames from 'classnames';\nimport { useLongPress } from 'use-long-press';\nimport { ContactForm } from \"../Forms/ContactForm/ContactForm\";\nimport ModalWindow from \"../Modal/ModalWindow\";\nimport { SubscriptionPaymentForm } from \"../Forms/SubscriptionPaymentForm/SubscriptionPaymentForm\";\nimport { CourseSearchForm } from \"../Forms/CourseSearchForm/CourseSearchForm\";\nimport TutorCourseCard from \"../TutorCourseCard\";\nimport CourseSearchResultIsNotDefind from \"../CourseSearchResultIsNotDefind\";\n\nvar axios = require('axios')[\"default\"];\n\nfunction ModeratorBlock(_ref) {\n  _s();\n\n  var _this = this;\n\n  var props = _ref.props;\n\n  var _useState = useState(0),\n      cityId = _useState[0],\n      setCityId = _useState[1];\n\n  var _useState2 = useState(0),\n      directionId = _useState2[0],\n      setDirectionId = _useState2[1];\n\n  var _useState3 = useState(0),\n      isOnline = _useState3[0],\n      setIsOnline = _useState3[1];\n\n  var _useState4 = useState(0),\n      courseId = _useState4[0],\n      setCourseId = _useState4[1];\n\n  var _useState5 = useState(false),\n      searchingTutors = _useState5[0],\n      setSearchingTutors = _useState5[1];\n\n  var _useState6 = useState(null),\n      courseCards = _useState6[0],\n      setCourseCards = _useState6[1];\n\n  var _useState7 = useState(true),\n      loading = _useState7[0],\n      setLoading = _useState7[1];\n\n  var _useState8 = useState(false),\n      loadingModal = _useState8[0],\n      setLoadingModal = _useState8[1];\n\n  var _useState9 = useState(false),\n      openMoreSort = _useState9[0],\n      setOpenMoreSort = _useState9[1];\n\n  var _useState10 = useState(false),\n      hideSort = _useState10[0],\n      setHideSort = _useState10[1];\n\n  var _useState11 = useState(0),\n      currentPage = _useState11[0],\n      setCurrentPage = _useState11[1];\n\n  var _useState12 = useState(12),\n      cardsNum = _useState12[0],\n      setCardsNum = _useState12[1];\n\n  var _useState13 = useState(0),\n      sortType = _useState13[0],\n      setSortType = _useState13[1];\n\n  var _useState14 = useState(0),\n      lessonType = _useState14[0],\n      setLessonType = _useState14[1];\n\n  var _useState15 = useState(\"Найденные курсы\"),\n      currentCourseCategory = _useState15[0],\n      setCurrentCourseCategory = _useState15[1];\n\n  var _useState16 = useState(\"Все направления\"),\n      tempCategoryId = _useState16[0],\n      setTempCategoryId = _useState16[1];\n\n  var _useState17 = useState([]),\n      imagesBase = _useState17[0],\n      setImagesBase = _useState17[1];\n\n  var loadCourseCards = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var imagesBaseResponse, result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              setLoading(true);\n              _context.next = 3;\n              return axios.get(\"\".concat(globals.productionServerDomain, \"/imagesBase\"));\n\n            case 3:\n              imagesBaseResponse = _context.sent;\n              setImagesBase(imagesBaseResponse.data);\n              _context.next = 7;\n              return axios.get(\"\".concat(globals.productionServerDomain, \"/courseCards/\")).then(function () {\n                setCourseCards(result.data);\n                console.log(result.data);\n              }).then(function () {\n                setLoading(false);\n              });\n\n            case 7:\n              result = _context.sent;\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadCourseCards() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var _useState18 = useState(true),\n      searchingCenterState = _useState18[0],\n      setSearchingCenterState = _useState18[1];\n\n  useEffect( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var params, centerName, direction, city, price, isOnline, center, searchingCenter;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            setLoading(true);\n            params = new URLSearchParams(window.location.search);\n            console.log('params', params);\n            centerName = params.get('centerName');\n            direction = null;\n            city = null;\n            price = null;\n            isOnline = null;\n            center = null;\n            searchingCenter = Number(params.get('searchingCenter'));\n            setSearchingCenterState(Boolean(searchingCenter));\n\n            if (params.has('direction')) {\n              direction = params.get('direction');\n              setDirectionId(Number(direction)); //document.getElementById(\"directionSelect\").value = direction.toString();\n            }\n\n            if (params.has('city')) {\n              city = params.get('city');\n              setCityId(Number(city)); //document.getElementById(\"citySelect\").value = city.toString();\n            }\n\n            if (params.has('price')) {\n              price = params.get('price');\n              setDirectionId(Number(direction)); //document.getElementById(\"priceSelect\").value = price;\n            }\n\n            if (params.has('isOnline')) {\n              isOnline = params.get('isOnline');\n              setIsOnline(Number(isOnline)); //document.getElementById(\"isOnlineSelect\").value = isOnline;\n            }\n\n            if (params.has('center')) {\n              center = params.get('center'); //document.getElementById(\"centerSelect\").value = center;\n            }\n\n            loadCourseCards().then(function () {\n              return setLoading(false);\n            });\n            document.querySelector('#page_top').scrollIntoView({\n              behavior: 'smooth'\n            });\n            setLoading(false);\n\n          case 19:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  })), []);\n  var longPressHandler = useLongPress(function () {\n    setShowLinkModal(true);\n  });\n\n  var _useState19 = useState(false),\n      showLinkModal = _useState19[0],\n      setShowLinkModal = _useState19[1];\n\n  var _useState20 = useState(false),\n      showCourseSearchModal = _useState20[0],\n      setCourseSearchModal = _useState20[1];\n\n  var handleLinkModalClose = function handleLinkModalClose() {\n    return setShowLinkModal(false);\n  };\n\n  var handleCourseSearchModalClose = function handleCourseSearchModalClose() {\n    return setCourseSearchModal(false);\n  };\n\n  var _useState21 = useState(''),\n      linkForTarget = _useState21[0],\n      setLinkForTarget = _useState21[1];\n\n  var sendApplication = function sendApplication(courseId, userInfo) {\n    var data = {\n      city_id: cityId,\n      direction_id: directionId,\n      name: userInfo.fullName,\n      phone: userInfo.phone,\n      email: userInfo.email,\n      promocode: userInfo.promocode,\n      age: 0,\n      isOnline: isOnline,\n      course_id: courseId,\n      role_id: searchingTutors ? 6 : 4\n    };\n    axios({\n      method: 'post',\n      url: \"\".concat(globals.productionServerDomain, \"/createCourseSearchTicket\"),\n      data: data,\n      headers: {\n        'Authorization': \"Bearer \".concat(globals.localStorageKeys.authToken)\n      }\n    }).then(function (res) {})[\"catch\"](function () {\n      alert('Что-то пошло нетак!');\n    });\n  };\n\n  return __jsx(\"div\", {\n    id: 'page_top',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }, __jsx(ModalWindow, {\n    show: showLinkModal,\n    handleClose: handleLinkModalClose,\n    contactForm: 'contactForm',\n    body: __jsx(React.Fragment, null, __jsx(\"p\", {\n      style: {\n        color: 'white',\n        fontSize: 18,\n        padding: 20,\n        boxSizing: 'border-box',\n        width: '100%',\n        wordBreak: 'break-word'\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 25\n      }\n    }, __jsx(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 29\n      }\n    }, \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430:\"), linkForTarget)),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }), __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 17\n    }\n  }, \"\\u041A\\u0443\\u0440\\u0441\\u044B\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/atom-icon.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    id: 'coursesBlock',\n    className: classnames(styles.container, styles.topBlock),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 13\n    }\n  }, __jsx(React.Fragment, null, courseCards !== null ? imagesBase.length !== 0 && (courseCards.length > 0 ? __jsx(\"div\", {\n    className: classnames(styles.courses_block),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 45\n    }\n  }, courseCards.map(function (course, idx) {\n    if (course.title !== 'test') {\n      return __jsx(\"div\", {\n        className: styles.courseCard_item,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 65\n        }\n      }, searchingCenterState === false && __jsx(TutorCourseCard, {\n        key: idx,\n        coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n        sendApplicationCallback: sendApplication,\n        setLoadingModal: setLoadingModal,\n        course: course,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 73\n        }\n      }), searchingCenterState === true && __jsx(CourseCard, {\n        key: idx,\n        coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n        sendApplicationCallback: sendApplication,\n        setLoadingModal: setLoadingModal,\n        course: course,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 73\n        }\n      }));\n    }\n  })) : __jsx(CourseSearchResultIsNotDefind, {\n    catalog: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 55\n    }\n  })) : __jsx(\"div\", {\n    className: styles.loader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 37\n    }\n  }, __jsx(\"img\", {\n    src: \"/loader.gif\",\n    alt: \"\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 41\n    }\n  })))));\n}\n\n_s(ModeratorBlock, \"Q5GlVrYBudDu6Px+bKblSh6f4Z0=\", false, function () {\n  return [useLongPress];\n});\n\n_c = ModeratorBlock;\nexport default ModeratorBlock;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModeratorBlock\");","map":{"version":3,"sources":["C:/Server/data/htdocs/oilan-mirror/goco/src/components/ModeratorBlock/ModeratorBlock.js"],"names":["Head","styles","CourseCard","HorizontalLine","React","useState","useEffect","Slider","StockCard","ContactButton","useContext","UserContext","globals","EditCourseCard","Loading","classnames","useLongPress","ContactForm","ModalWindow","SubscriptionPaymentForm","CourseSearchForm","TutorCourseCard","CourseSearchResultIsNotDefind","axios","require","ModeratorBlock","props","cityId","setCityId","directionId","setDirectionId","isOnline","setIsOnline","courseId","setCourseId","searchingTutors","setSearchingTutors","courseCards","setCourseCards","loading","setLoading","loadingModal","setLoadingModal","openMoreSort","setOpenMoreSort","hideSort","setHideSort","currentPage","setCurrentPage","cardsNum","setCardsNum","sortType","setSortType","lessonType","setLessonType","currentCourseCategory","setCurrentCourseCategory","tempCategoryId","setTempCategoryId","imagesBase","setImagesBase","loadCourseCards","get","productionServerDomain","imagesBaseResponse","data","then","result","console","log","searchingCenterState","setSearchingCenterState","params","URLSearchParams","window","location","search","centerName","direction","city","price","center","searchingCenter","Number","Boolean","has","document","querySelector","scrollIntoView","behavior","longPressHandler","setShowLinkModal","showLinkModal","showCourseSearchModal","setCourseSearchModal","handleLinkModalClose","handleCourseSearchModalClose","linkForTarget","setLinkForTarget","sendApplication","userInfo","city_id","direction_id","name","fullName","phone","email","promocode","age","course_id","role_id","method","url","headers","localStorageKeys","authToken","res","alert","color","fontSize","padding","boxSizing","width","wordBreak","container","topBlock","length","courses_block","map","course","idx","title","courseCard_item","Math","floor","random","src","loader"],"mappings":"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","sourcesContent":["import Head from 'next/head'\r\nimport styles from \"./ModeratorBlock.module.css\";\r\nimport CourseCard from \"../CourseCard/CourseCard\";\r\nimport HorizontalLine from \"../HorizontalLine/HorizaontalLine\";\r\nimport React, {useState, useEffect} from \"react\";\r\nimport Slider from 'react-animated-slider';\r\nimport 'react-animated-slider/build/horizontal.css'\r\n\r\nimport StockCard from \"../StockCard/StockCard\";\r\nimport ContactButton from \"../ContactButton/ContactButton\";\r\nimport {useContext} from \"react\";\r\nimport UserContext from \"../../userContext\"\r\nimport globals from \"../../globals\";\r\nimport EditCourseCard from \"../EditCourseCard/EditCourseCard\";\r\nimport Loading from \"../Loading/Loading\"\r\nimport classnames from 'classnames'\r\nimport {useLongPress} from 'use-long-press';\r\nimport {ContactForm} from \"../Forms/ContactForm/ContactForm\";\r\nimport ModalWindow from \"../Modal/ModalWindow\";\r\nimport {SubscriptionPaymentForm} from \"../Forms/SubscriptionPaymentForm/SubscriptionPaymentForm\";\r\nimport {CourseSearchForm} from \"../Forms/CourseSearchForm/CourseSearchForm\";\r\nimport TutorCourseCard from \"../TutorCourseCard\";\r\nimport CourseSearchResultIsNotDefind from \"../CourseSearchResultIsNotDefind\";\r\n\r\n\r\nconst axios = require('axios').default;\r\n\r\nfunction ModeratorBlock({props}) {\r\n    const [cityId, setCityId] = useState(0);\r\n    const [directionId, setDirectionId] = useState(0);\r\n    const [isOnline, setIsOnline] = useState(0);\r\n    const [courseId, setCourseId] = useState(0);\r\n\r\n    const [searchingTutors, setSearchingTutors] = useState(false);\r\n    const [courseCards, setCourseCards] = useState(null);\r\n\r\n    const [loading, setLoading] = useState(true);\r\n    const [loadingModal, setLoadingModal] = useState(false);\r\n    const [openMoreSort, setOpenMoreSort] = useState(false)\r\n    const [hideSort, setHideSort] = useState(false)\r\n\r\n    const [currentPage, setCurrentPage] = useState(0);\r\n    const [cardsNum, setCardsNum] = useState(12);\r\n\r\n    const [sortType, setSortType] = useState(0)\r\n    const [lessonType, setLessonType] = useState(0)\r\n\r\n    const [currentCourseCategory, setCurrentCourseCategory] = useState(\"Найденные курсы\")\r\n    const [tempCategoryId, setTempCategoryId] = useState(\"Все направления\")\r\n\r\n    const [imagesBase, setImagesBase] = useState([]);\r\n\r\n    const loadCourseCards = async () => {\r\n        setLoading(true)\r\n\r\n        let imagesBaseResponse = await axios.get(`${globals.productionServerDomain}/imagesBase`);\r\n        setImagesBase(imagesBaseResponse.data);\r\n\r\n        let result = await axios.get(`${globals.productionServerDomain}/courseCards/`).then(() => {\r\n            setCourseCards(result.data);\r\n            console.log(result.data);\r\n        }).then(() => {\r\n            setLoading(false);\r\n        });\r\n    }\r\n    \r\n    const [searchingCenterState, setSearchingCenterState] = useState(true)\r\n    useEffect(async () =>{\r\n        setLoading(true)\r\n        const params = new URLSearchParams(window.location.search);\r\n        console.log('params', params);\r\n        let centerName = params.get('centerName');\r\n        let direction = null;\r\n        let city = null;\r\n        let price = null;\r\n        let isOnline = null;\r\n        let center = null;\r\n        let searchingCenter = Number(params.get('searchingCenter'));\r\n        setSearchingCenterState(Boolean(searchingCenter))\r\n\r\n        if (params.has('direction')) {\r\n            direction = params.get('direction');\r\n            setDirectionId(Number(direction));\r\n            //document.getElementById(\"directionSelect\").value = direction.toString();\r\n        }\r\n        if (params.has('city')) {\r\n            city = params.get('city');\r\n            setCityId(Number(city));\r\n            //document.getElementById(\"citySelect\").value = city.toString();\r\n        }\r\n        if (params.has('price')) {\r\n            price = params.get('price');\r\n            setDirectionId(Number(direction));\r\n            //document.getElementById(\"priceSelect\").value = price;\r\n        }\r\n        if (params.has('isOnline')) {\r\n            isOnline = params.get('isOnline');\r\n            setIsOnline(Number(isOnline))\r\n            //document.getElementById(\"isOnlineSelect\").value = isOnline;\r\n        }\r\n        if (params.has('center')) {\r\n            center = params.get('center');\r\n            //document.getElementById(\"centerSelect\").value = center;\r\n        }\r\n        \r\n            loadCourseCards().then(()=>setLoading(false))\r\n        \r\n\r\n        document.querySelector('#page_top').scrollIntoView({\r\n            behavior: 'smooth'\r\n        });\r\n        setLoading(false);\r\n    }, [])\r\n\r\n    const longPressHandler = useLongPress(() => {\r\n        setShowLinkModal(true);\r\n    });\r\n\r\n    const [showLinkModal, setShowLinkModal] = useState(false);\r\n    const [showCourseSearchModal, setCourseSearchModal] = useState(false);\r\n\r\n    const handleLinkModalClose = () => setShowLinkModal(false);\r\n    const handleCourseSearchModalClose = () => setCourseSearchModal(false);\r\n\r\n    let [linkForTarget, setLinkForTarget] = useState('');\r\n\r\n    const sendApplication = (courseId, userInfo) => {\r\n\r\n        let data = {\r\n            city_id: cityId,\r\n            direction_id: directionId,\r\n            name: userInfo.fullName,\r\n            phone: userInfo.phone,\r\n            email: userInfo.email,\r\n            promocode: userInfo.promocode,\r\n            age: 0,\r\n            isOnline: isOnline,\r\n            course_id: courseId,\r\n            role_id: searchingTutors ? 6 : 4\r\n        };\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: `${globals.productionServerDomain}/createCourseSearchTicket`,\r\n            data: data,\r\n            headers: {\r\n                'Authorization': `Bearer ${globals.localStorageKeys.authToken}`\r\n            }\r\n        }).then(function(res){\r\n\r\n        }).catch(() => {\r\n            alert('Что-то пошло нетак!');\r\n        });\r\n    }\r\n\r\n    return (\r\n        <div id={'page_top'}>\r\n            <ModalWindow\r\n                show={showLinkModal}\r\n                handleClose={handleLinkModalClose}\r\n                contactForm={'contactForm'}\r\n                body={\r\n                    <>\r\n                        <p style={{\r\n                            color: 'white',\r\n                            fontSize: 18,\r\n                            padding: 20,\r\n                            boxSizing: 'border-box',\r\n                            width: '100%',\r\n                            wordBreak: 'break-word'\r\n                        }}>\r\n                            <p>Ссылка:</p>\r\n                            {linkForTarget}\r\n                        </p>\r\n                    </>\r\n                }\r\n            />\r\n\r\n            <Head>\r\n                <title>Курсы</title>\r\n                <link rel=\"icon\" href=\"/atom-icon.png\"/>\r\n                \r\n            </Head>\r\n\r\n            <div id={'coursesBlock'}\r\n                 className={classnames(styles.container, styles.topBlock)}>\r\n                {\r\n                    (\r\n                        <>\r\n                            {\r\n                                courseCards !== null ? (\r\n                                    imagesBase.length !== 0 && (\r\n                                        courseCards.length > 0 ? (\r\n                                            <div className={classnames(styles.courses_block)}>\r\n                                                {\r\n                                                    courseCards.map((course, idx) => {\r\n                                                        if (course.title !== 'test') {\r\n                                                            return (\r\n                                                                <div className={styles.courseCard_item}>\r\n                                                                    {searchingCenterState===false && (\r\n                                                                        <TutorCourseCard key={idx} coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} sendApplicationCallback={sendApplication} setLoadingModal={setLoadingModal} course={course}/>\r\n                                                                    )}\r\n                                                                    {searchingCenterState===true && (\r\n                                                                        <CourseCard key={idx} coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} sendApplicationCallback={sendApplication} setLoadingModal={setLoadingModal} course={course}/>\r\n                                                                    )}\r\n                                                                </div>\r\n                                                            )\r\n                                                        }\r\n                                                    })\r\n                                                }\r\n\r\n                                            </div>) : <CourseSearchResultIsNotDefind catalog={true}/>)\r\n                                ) : (\r\n                                    <div className={styles.loader}>\r\n                                        <img src=\"/loader.gif\" alt=\"\"></img>\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </>\r\n                    )\r\n                }\r\n            </div>\r\n\r\n           \r\n        </div>\r\n\r\n    )\r\n\r\n\r\n}\r\n\r\n\r\nexport default ModeratorBlock;\r\n"]},"metadata":{},"sourceType":"module"}