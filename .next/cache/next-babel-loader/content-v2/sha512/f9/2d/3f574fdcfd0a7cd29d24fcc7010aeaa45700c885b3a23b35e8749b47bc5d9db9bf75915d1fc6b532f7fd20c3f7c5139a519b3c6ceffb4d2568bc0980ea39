{"ast":null,"code":"import _defineProperty from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"C:/Server/data/htdocs/oilan-mirror/goco/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilan-mirror\\\\goco\\\\src\\\\components\\\\ModerateCourseCard\\\\ModerateCourseCard.js\",\n    _s = $RefreshSig$();\n\nvar __jsx = React.createElement;\nimport styles from './ModerateCourseCard.module.css';\nimport Link from \"next/link\";\nimport React, { useEffect, useState } from \"react\";\nimport { SignupToCourseForm } from \"../Forms/SignupToCourseForm/SignupToCourseForm\";\nimport ModalWindow from \"../Modal/ModalWindow\";\nimport classnames from 'classnames';\nimport globals from \"../../globals\";\nimport Image from \"next/image\";\n\nvar axios = require('axios')[\"default\"];\n\nexport default function ModerateCourseCard(props) {\n  _s();\n\n  var _ref2;\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var _useState2 = useState(false),\n      showInfo = _useState2[0],\n      setShowInfo = _useState2[1];\n\n  var _useState3 = useState(false),\n      showPhoneNumber = _useState3[0],\n      setShowPhoneNumber = _useState3[1];\n\n  var _useState4 = useState(false),\n      showContacts = _useState4[0],\n      setShowContacts = _useState4[1];\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var _useState5 = useState([]),\n      promotions = _useState5[0],\n      setPromotions = _useState5[1];\n\n  var _useState6 = useState([]),\n      stocks = _useState6[0],\n      setStocks = _useState6[1];\n\n  var _useState7 = useState(false),\n      promotionsLoaded = _useState7[0],\n      setPromotionsLoaded = _useState7[1];\n\n  var loadStocks = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var result, i;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return axios.post(\"\".concat(globals.productionServerDomain, \"/loadDirectionPromotions\"), {\n                direction_id: 0\n              });\n\n            case 2:\n              result = _context.sent;\n              setStocks(result.data);\n\n              for (i = 0; i < result.data.length; i++) {\n                if (result.data[i].center_id === props.course.course_id) {\n                  promotions.push(result.data[i]);\n                }\n              }\n\n              setPromotions(promotions);\n\n              if (result.data.length > 0) {\n                setPromotionsLoaded(true);\n              } else {\n                setPromotionsLoaded(false);\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function loadStocks() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var _useState8 = useState(false),\n      showPromotions = _useState8[0],\n      setShowPromotions = _useState8[1];\n\n  var _useState9 = useState(0),\n      promotionIndex = _useState9[0],\n      setPromotionIndex = _useState9[1];\n\n  var _useState10 = useState(10),\n      wordsToShowLength = _useState10[0],\n      setWordsToShowLength = _useState10[1];\n\n  var _useState11 = useState(\"\\u2661\"),\n      heartValue = _useState11[0],\n      setHeartValue = _useState11[1];\n\n  function prettify(num) {\n    var n = num.toString();\n    return n.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + ' ');\n  }\n\n  var coursePrice = prettify(props.course.price);\n\n  var _useState12 = useState(props.course.description === undefined ? \"\" : props.course.description),\n      courseDescription = _useState12[0],\n      setCourseDecription = _useState12[1];\n\n  var _useState13 = useState(props.course.verificated),\n      verifyCheck = _useState13[0],\n      setVerifyCheck = _useState13[1];\n\n  var getCurrentDateTime = function getCurrentDateTime() {\n    var currentDate = new Date();\n    var dd = currentDate.getDate();\n    if (dd < 10) dd = '0' + dd;\n    var mm = currentDate.getMonth() + 1;\n    if (mm < 10) mm = '0' + mm;\n    var yy = currentDate.getFullYear();\n    var hours = currentDate.getHours();\n    var min = currentDate.getMinutes();\n    var sec = currentDate.getSeconds();\n    return yy + \"-\" + mm + \"-\" + dd + \" \" + hours + \":\" + min + \":\" + sec;\n  };\n\n  var _useState14 = useState(false),\n      applicationSent = _useState14[0],\n      setApplicationSent = _useState14[1];\n\n  var sendApplication = function sendApplication(courseId, userInfo) {\n    var data = {\n      city_id: props.course.city_id,\n      direction_id: props.course.category_id || props.course.direction_id,\n      name: userInfo.fullName,\n      phone: userInfo.phone,\n      email: userInfo.email,\n      promocode: userInfo.promocode,\n      age: 0,\n      isOnline: props.course.format !== 'Offline',\n      course_id: props.course.course_id,\n      role_id: 4\n    };\n    axios({\n      method: 'post',\n      url: \"\".concat(globals.productionServerDomain, \"/createCourseSearchTicket\"),\n      data: data,\n      headers: {\n        'Authorization': \"Bearer \".concat(globals.localStorageKeys.authToken)\n      }\n    }).then(function (res) {})[\"catch\"](function () {\n      alert('Что-то пошло нетак!');\n    });\n  };\n\n  var _useState15 = useState(false),\n      mobileVersion = _useState15[0],\n      setMobileVersion = _useState15[1];\n\n  useEffect(function () {\n    if (window.innerWidth <= 761) {\n      setMobileVersion(true);\n      console.log('mob version ' + true);\n    } else {\n      setMobileVersion(false);\n      console.log('mob version ' + false);\n    }\n\n    loadStocks();\n  }, []);\n\n  var updateVerificated = function updateVerificated(targetInfo) {\n    var data = {\n      id: targetInfo.id,\n      verificated: targetInfo.verificated\n    };\n    console.log(data);\n    axios.post(\"\".concat(globals.productionServerDomain, \"/setVerificated/\"), {\n      id: targetInfo.id,\n      verificated: targetInfo.verificated\n    }).then(alert('Changes saved!'));\n  };\n\n  return __jsx(\"div\", {\n    className: styles.cardBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: styles.image_block,\n    style: props.course.img_src ? {\n      backgroundImage: \"url(\".concat(props.course.img_src, \")\"),\n      backgroundPosition: 'center',\n      backgroundSize: 'cover',\n      backgroundColor: 'white',\n      border: '1px solid white',\n      width: '50px',\n      height: '50px'\n    } : (_ref2 = {\n      backgroundColor: 'red',\n      backgroundPosition: 'center',\n      backgroundSize: 'cover'\n    }, _defineProperty(_ref2, \"backgroundColor\", 'white'), _defineProperty(_ref2, \"border\", '1px solid white'), _defineProperty(_ref2, \"width\", '50px'), _defineProperty(_ref2, \"height\", '50px'), _ref2),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 17\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 24\n    }\n  }, \"id:\"), \" \", props.course.id), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 24\n    }\n  }, \"\\u0426\\u0435\\u043D\\u0442\\u0440:\"), \" \", props.course.course_title), __jsx(\"p\", {\n    style: props.course.title ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 79\n    }\n  }, \"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0443\\u0440\\u0441\\u0430:\"), \" \", props.course.title), __jsx(\"p\", {\n    style: props.course.description ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 85\n    }\n  }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u043A\\u0443\\u0440\\u0441\\u0430:\"), \" \", props.course.description), __jsx(\"p\", {\n    style: props.course.course_desc ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 85\n    }\n  }, \"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0446\\u0435\\u043D\\u0442\\u0440\\u0430:\"), \" \", props.course.course_desc), __jsx(\"p\", {\n    style: props.course.schedule ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 82\n    }\n  }, \"\\u0420\\u0430\\u0441\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\"), \" \", props.course.schedule), __jsx(\"p\", {\n    style: props.course.price ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 79\n    }\n  }, \"\\u0426\\u0435\\u043D\\u0430:\"), \" \", props.course.price, props.course.currency, \"/\", props.course.unit_of_time), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 24\n    }\n  }, \"\\u041D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435:\"), \" \", props.course.category), __jsx(\"p\", {\n    style: props.course.format ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 80\n    }\n  }, \"\\u0424\\u043E\\u0440\\u043C\\u0430\\u0442:\"), \" \", props.course.format), __jsx(\"p\", {\n    style: props.course.type ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 78\n    }\n  }, \"\\u0422\\u0438\\u043F:\"), \" \", props.course.type), __jsx(\"p\", {\n    style: props.course.addresses ? {} : {\n      backgroundColor: 'red'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 83\n    }\n  }, \"\\u0410\\u0434\\u0440\\u0435\\u0441:\"), \" \", props.course.addresses), __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 24\n    }\n  }, \"\\u041E\\u0434\\u043E\\u0431\\u0440\\u0435\\u043D\\u043E:\"), \" \", __jsx(\"input\", {\n    type: \"checkbox\",\n    onClick: function onClick() {\n      setVerifyCheck(!verifyCheck);\n      updateVerificated({\n        id: props.course.id,\n        verificated: !verifyCheck\n      });\n    },\n    checked: verifyCheck ? true : false,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 41\n    }\n  }))));\n}\n\n_s(ModerateCourseCard, \"SKqKYLIYm5UsyS6oR09UHYlQSLI=\");\n\n_c = ModerateCourseCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ModerateCourseCard\");","map":{"version":3,"sources":["C:/Server/data/htdocs/oilan-mirror/goco/src/components/ModerateCourseCard/ModerateCourseCard.js"],"names":["styles","Link","React","useEffect","useState","SignupToCourseForm","ModalWindow","classnames","globals","Image","axios","require","ModerateCourseCard","props","show","setShow","showInfo","setShowInfo","showPhoneNumber","setShowPhoneNumber","showContacts","setShowContacts","handleClose","handleShow","promotions","setPromotions","stocks","setStocks","promotionsLoaded","setPromotionsLoaded","loadStocks","post","productionServerDomain","direction_id","result","data","i","length","center_id","course","course_id","push","showPromotions","setShowPromotions","promotionIndex","setPromotionIndex","wordsToShowLength","setWordsToShowLength","heartValue","setHeartValue","prettify","num","n","toString","replace","coursePrice","price","description","undefined","courseDescription","setCourseDecription","verificated","verifyCheck","setVerifyCheck","getCurrentDateTime","currentDate","Date","dd","getDate","mm","getMonth","yy","getFullYear","hours","getHours","min","getMinutes","sec","getSeconds","applicationSent","setApplicationSent","sendApplication","courseId","userInfo","city_id","category_id","name","fullName","phone","email","promocode","age","isOnline","format","role_id","method","url","headers","localStorageKeys","authToken","then","res","alert","mobileVersion","setMobileVersion","window","innerWidth","console","log","updateVerificated","targetInfo","id","cardBlock","image_block","img_src","backgroundImage","backgroundPosition","backgroundSize","backgroundColor","border","width","height","course_title","title","course_desc","schedule","currency","unit_of_time","category","type","addresses"],"mappings":"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","sourcesContent":["import styles from './ModerateCourseCard.module.css'\r\nimport Link from \"next/link\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {SignupToCourseForm} from \"../Forms/SignupToCourseForm/SignupToCourseForm\";\r\nimport ModalWindow from \"../Modal/ModalWindow\";\r\nimport classnames from 'classnames';\r\nimport globals from \"../../globals\";\r\nimport Image from \"next/image\";\r\n\r\nconst axios = require('axios').default;\r\n\r\nexport default function ModerateCourseCard(props) {\r\n    const [show, setShow] = useState(false);\r\n    const [showInfo, setShowInfo] = useState(false);\r\n    const [showPhoneNumber, setShowPhoneNumber] = useState(false);\r\n    const [showContacts, setShowContacts] = useState(false)\r\n    const handleClose = () => setShow(false);\r\n    const handleShow = () => setShow(true);\r\n\r\n    const [promotions, setPromotions] = useState([])\r\n    const [stocks, setStocks] = useState([]);\r\n    const [promotionsLoaded, setPromotionsLoaded] = useState(false)\r\n    const loadStocks = async () => {\r\n        let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {direction_id: 0});\r\n        setStocks(result.data);\r\n        for(let i=0;i<result.data.length;i++){\r\n            if(result.data[i].center_id === props.course.course_id){\r\n                promotions.push(result.data[i])\r\n            }\r\n        }\r\n        setPromotions(promotions)\r\n        if(result.data.length > 0){\r\n            setPromotionsLoaded(true)\r\n        } else {\r\n            setPromotionsLoaded(false)\r\n        }\r\n\r\n    }\r\n    const [showPromotions, setShowPromotions] = useState(false)\r\n    const [promotionIndex, setPromotionIndex] = useState(0)\r\n\r\n    const [wordsToShowLength, setWordsToShowLength] = useState(10)\r\n    const [heartValue, setHeartValue] = useState('\\u2661')\r\n\r\n\r\n    function prettify(num) {\r\n        var n = num.toString();\r\n        return n.replace(/(\\d{1,3}(?=(?:\\d\\d\\d)+(?!\\d)))/g, \"$1\" + ' ');\r\n    }\r\n\r\n    const coursePrice = prettify(props.course.price)\r\n    const [courseDescription, setCourseDecription] = useState(props.course.description === undefined ? \"\" : props.course.description)\r\n    const [verifyCheck, setVerifyCheck] = useState(props.course.verificated);\r\n    const getCurrentDateTime = () => {\r\n        let currentDate = new Date();\r\n\r\n        let dd = currentDate.getDate();\r\n        if(dd < 10) dd = '0' + dd;\r\n\r\n        let mm = currentDate.getMonth()+1;\r\n        if(mm < 10) mm = '0' + mm;\r\n\r\n        let yy = currentDate.getFullYear();\r\n\r\n        let hours = currentDate.getHours();\r\n        let min = currentDate.getMinutes();\r\n        let sec = currentDate.getSeconds();\r\n\r\n        return yy + \"-\" + mm + \"-\" + dd + \" \" + hours + \":\" + min + \":\" + sec;\r\n    }\r\n\r\n    const [applicationSent, setApplicationSent] = useState(false);\r\n\r\n    const sendApplication = (courseId, userInfo) => {\r\n        let data = {\r\n            city_id: props.course.city_id,\r\n            direction_id: props.course.category_id || props.course.direction_id,\r\n            name: userInfo.fullName,\r\n            phone: userInfo.phone,\r\n            email: userInfo.email,\r\n            promocode: userInfo.promocode,\r\n            age: 0,\r\n            isOnline: props.course.format !== 'Offline',\r\n            course_id: props.course.course_id,\r\n            role_id: 4\r\n        };\r\n\r\n        axios({\r\n            method: 'post',\r\n            url: `${globals.productionServerDomain}/createCourseSearchTicket`,\r\n            data: data,\r\n            headers: {\r\n                'Authorization': `Bearer ${globals.localStorageKeys.authToken}`\r\n            }\r\n        }).then(function(res){\r\n\r\n        }).catch(() => {\r\n            alert('Что-то пошло нетак!');\r\n        });\r\n    }\r\n\r\n    const [mobileVersion, setMobileVersion] = useState(false)\r\n\r\n    useEffect(()=>{\r\n        if (window.innerWidth <= 761){\r\n            setMobileVersion(true)\r\n            console.log('mob version ' + true)\r\n        } else {\r\n            setMobileVersion(false)\r\n            console.log('mob version ' + false)\r\n        }\r\n        loadStocks()\r\n    }, [])\r\n\r\n    const updateVerificated = (targetInfo) => {\r\n\r\n        let data = {\r\n            id: targetInfo.id,\r\n            verificated: targetInfo.verificated,\r\n        };\r\n        console.log(data)\r\n        axios.post(`${globals.productionServerDomain}/setVerificated/`, {id: targetInfo.id, verificated: targetInfo.verificated}).then(\r\n                alert('Changes saved!')\r\n            )\r\n    }\r\n\r\n    return (\r\n            <div className={styles.cardBlock}>\r\n                <div className={styles.image_block} style={props.course.img_src?\r\n                    {\r\n                        backgroundImage: `url(${props.course.img_src})`,\r\n                        backgroundPosition: 'center',\r\n                        backgroundSize: 'cover',\r\n                        backgroundColor: 'white',\r\n                        border: '1px solid white',\r\n                        width: '50px',\r\n                        height: '50px'\r\n                    }:{\r\n                        backgroundColor: 'red',\r\n                        backgroundPosition: 'center',\r\n                        backgroundSize: 'cover',\r\n                        backgroundColor: 'white',\r\n                        border: '1px solid white',\r\n                        width: '50px',\r\n                        height: '50px'\r\n                    }}>\r\n                </div>\r\n                <div>\r\n                    <p><b>id:</b> {props.course.id}</p>\r\n                    <p><b>Центр:</b> {props.course.course_title}</p>\r\n                    <p style={props.course.title?{}:{backgroundColor: 'red'}}><b>Название курса:</b> {props.course.title}</p>\r\n                    <p style={props.course.description?{}:{backgroundColor: 'red'}}><b>Описание курса:</b> {props.course.description}</p>\r\n                    <p style={props.course.course_desc?{}:{backgroundColor: 'red'}}><b>Описание центра:</b> {props.course.course_desc}</p>\r\n                    <p style={props.course.schedule?{}:{backgroundColor: 'red'}}><b>Расписание:</b> {props.course.schedule}</p>\r\n                    <p style={props.course.price?{}:{backgroundColor: 'red'}}><b>Цена:</b> {props.course.price}{props.course.currency}/{props.course.unit_of_time}</p>\r\n                    <p><b>Направление:</b> {props.course.category}</p>\r\n                    <p style={props.course.format?{}:{backgroundColor: 'red'}}><b>Формат:</b> {props.course.format}</p>\r\n                    <p style={props.course.type?{}:{backgroundColor: 'red'}}><b>Тип:</b> {props.course.type}</p>\r\n                    <p style={props.course.addresses?{}:{backgroundColor: 'red'}}><b>Адрес:</b> {props.course.addresses}</p>\r\n                    <p><b>Одобрено:</b> <input\r\n                                type=\"checkbox\"\r\n                                onClick={() => {\r\n                                    setVerifyCheck(!verifyCheck);\r\n                                    updateVerificated({\r\n                                        id: props.course.id,\r\n                                        verificated: !verifyCheck,\r\n                                    });\r\n                                }}\r\n                                checked={verifyCheck ? true : false}\r\n                            /></p>\r\n                </div>\r\n            </div>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}