{"ast":null,"code":"var _jsxFileName = \"C:\\\\Server\\\\data\\\\htdocs\\\\oilan-mirror\\\\goco\\\\pages\\\\catalog\\\\index.js\";\nvar __jsx = React.createElement;\nimport styles from './style.module.css';\nimport Head from 'next/head';\nimport Header from \"../../src/components/Header/Header\";\nimport React, { useEffect, useState } from \"react\";\nimport FilterBlock from \"../../src/components/FilterBlock\";\nimport { default as axios } from \"axios\";\nimport globals from \"../../src/globals\";\nimport { useRouter } from \"next/router\";\nimport { Image } from \"react-bootstrap\";\nimport SimpleSlider from \"../../src/components/SimpleSlider/SimpleSlider\"; // import NewSlider from \"../../src/components/NewSlider/NewSlider\";\n\nimport CourseCategoriesSliderIMG from \"../../src/components/CourseCategoriesSliderIMG\";\nimport LoadingBlock from \"../../src/components/LoadingBlock\";\nimport coursesStyles from \"../../styles/components/content/Courses.module.css\";\nimport CourseCard from \"../../src/components/CourseCard/CourseCard\";\nimport ContactBlock from \"../../src/components/ContactBlock\";\nimport Footer from \"../../src/components/Footer/Footer\";\nimport LurkingFilterBlock from \"../../src/components/LurkingFilterBlock\";\nimport CourseSearchResultIsNotDefind from \"../../src/components/CourseSearchResultIsNotDefind\";\n\nconst Catalog = () => {\n  const router = useRouter();\n  const {\n    0: cardsToShow,\n    1: setCardsToShow\n  } = useState(8);\n\n  const addCards = () => {\n    setCardsToShow(cardsToShow + 8);\n  };\n\n  const ym = () => {\n    return \"<!-- Yandex.Metrika counter -->\\n\" + \"<script type=\\\"text/javascript\\\" >\\n\" + \"   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\\n\" + \"   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\\n\" + \"   (window, document, \\\"script\\\", \\\"https://mc.yandex.ru/metrika/tag.js\\\", \\\"ym\\\");\\n\" + \"\\n\" + \"   ym(78186067, \\\"init\\\", {\\n\" + \"        clickmap:true,\\n\" + \"        trackLinks:true,\\n\" + \"        accurateTrackBounce:true,\\n\" + \"        webvisor:true,\\n\" + \"        ecommerce:\\\"dataLayer\\\"\\n\" + \"   });\\n\" + \"</script>\\n\" + \"<noscript><div><img src=\\\"https://mc.yandex.ru/watch/78186067\\\" style=\\\"position:absolute; left:-9999px;\\\" alt=\\\"\\\" /></div></noscript>\\n\" + \"<!-- /Yandex.Metrika counter -->\";\n  };\n\n  const filterBtnHandler = async (centerName, city, direction, price, isOnline, searchingCenter) => {\n    const redirectUrl = `/courses?centerName=${centerName}&direction=${direction}&city=${city}&price=${price}&isOnline=${isOnline}&searchingCenter=${searchingCenter}`;\n    await router.push(redirectUrl); //\n    // let postResult = await axios.post(`${globals.productionServerDomain}/courseCardsFilter/`, data);\n    // setCourseCards(postResult['data']);\n    // document.querySelector('#coursesBlock').scrollIntoView({\n    //     behavior: 'smooth'\n    // });\n    //\n    // setLoading(false);\n    // setOpenMoreSort(true)\n  };\n\n  const {\n    0: imagesBase,\n    1: setImagesBase\n  } = useState([]);\n\n  const loadCourseCards = async directionId => {\n    setCoursesLoading(true);\n    let result = await axios.get(`${globals.productionServerDomain}/courseCards/`);\n    setCourseCards(result.data);\n    console.log('courseCards', result.data);\n    setShowUps(true);\n  };\n\n  const loadFilters = async () => {\n    setFiltersLoading(true);\n    let result = await axios.get(`${globals.productionServerDomain}/filters`);\n    setFilters(result.data);\n    setFiltersLoading(false);\n  };\n\n  const loadStocks = async () => {\n    setStocksLoading(true);\n    let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {\n      direction_id: 0\n    });\n    setStocks(result.data);\n  };\n\n  const {\n    0: stocksLoading,\n    1: setStocksLoading\n  } = useState(false);\n  const {\n    0: filtersLoading,\n    1: setFiltersLoading\n  } = useState(false);\n  const {\n    0: coursesLoading,\n    1: setCoursesLoading\n  } = useState(false);\n  const {\n    0: loadingModal,\n    1: setLoadingModal\n  } = useState(false);\n  const {\n    0: showUps,\n    1: setShowUps\n  } = useState(false);\n  const {\n    0: filters,\n    1: setFilters\n  } = useState([]);\n  const {\n    0: stocks,\n    1: setStocks\n  } = useState([]);\n  const {\n    0: courseCards,\n    1: setCourseCards\n  } = useState([]);\n  useEffect(async () => {\n    let imagesBaseResponse = await axios.get(`${globals.productionServerDomain}/imagesBase`);\n    setImagesBase(imagesBaseResponse.data);\n    setCoursesLoading(true);\n    loadFilters();\n    loadCourseCards().then(() => setCoursesLoading(false));\n    loadStocks().then(() => setStocksLoading(false));\n    window.scrollTo(0, 0);\n  }, []);\n\n  function componentDidMount() {\n    window.scrollTo(0, 0);\n  }\n\n  return __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, __jsx(Header, {\n    white: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }\n  }), __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 17\n    }\n  }, \"Oilan - \\u041A\\u0430\\u0442\\u0430\\u043B\\u043E\\u0433\"), __jsx(\"link\", {\n    rel: \"icon\",\n    href: \"/atom-icon.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    dangerouslySetInnerHTML: {\n      __html: ym()\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: styles.filterBlockWrapper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, __jsx(FilterBlock, {\n    filters: filters,\n    filterBtnHandler: filterBtnHandler,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: styles.titleBlock,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(Image, {\n    src: '/fire-dynamic-color.png',\n    className: styles.titleImg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 17\n    }\n  }), __jsx(\"span\", {\n    className: styles.title,\n    style: {\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, \"\\u0410\\u043A\\u0442\\u0443\\u0430\\u043B\\u044C\\u043D\\u044B\\u0435 \\u0430\\u043A\\u0446\\u0438\\u0438\")), __jsx(\"div\", {\n    style: {\n      padding: '20px 0 60px 0',\n      width: '100%',\n      boxSizing: 'border-box'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, stocksLoading ? __jsx(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 37\n    }\n  }) : stocks.length != 0 ? __jsx(SimpleSlider, {\n    stocks: stocks,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 77\n    }\n  }) : __jsx(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 111\n    }\n  }), \"// \", __jsx(NewSlider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 20\n    }\n  })), __jsx(\"div\", {\n    className: styles.titleBlock,\n    style: {\n      marginTop: 20,\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 13\n    }\n  }, __jsx(Image, {\n    src: '/cryptocurrency-certificate.png',\n    className: styles.titleImg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }), __jsx(\"span\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }\n  }, \"\\u041A\\u043B\\u044E\\u0447\\u0435\\u0432\\u044B\\u0435 \\u043D\\u0430\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u0438\\u044F\")), filtersLoading ? __jsx(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 34\n    }\n  }) : filters[1] !== undefined ? __jsx(CourseCategoriesSliderIMG, {\n    categories: filters[1],\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 80\n    }\n  }) : null, __jsx(\"div\", {\n    className: styles.titleBlock,\n    style: {\n      marginTop: 20,\n      marginBottom: 20\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, __jsx(Image, {\n    src: '/notebook-dynamic-color.png',\n    className: styles.titleImg,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }), __jsx(\"span\", {\n    className: styles.title,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 17\n    }\n  }, \"\\u041F\\u043E\\u043F\\u0443\\u043B\\u044F\\u0440\\u043D\\u044B\\u0435 \\u043A\\u0443\\u0440\\u0441\\u044B\")), filters[0] != undefined && __jsx(LurkingFilterBlock, {\n    setCardsToShow: setCardsToShow,\n    cities: filters[0],\n    directions: filters[1],\n    setCourseCards: setCourseCards,\n    setCoursesLoading: setCoursesLoading,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 45\n    }\n  }), courseCards.length > 0 && __jsx(\"div\", {\n    className: styles.courses_block,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 21\n    }\n  }, courseCards.slice(0, cardsToShow).map(course => {\n    if (course.title !== 'test') {\n      return __jsx(\"div\", {\n        style: {\n          marginLeft: '5%',\n          marginRight: '5%'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 41\n        }\n      }, __jsx(CourseCard, {\n        coverImage: imagesBase[Math.floor(Math.random() * imagesBase.length)].src,\n        setLoadingModal: setLoadingModal,\n        course: course,\n        showApplicationModal: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 45\n        }\n      }));\n    }\n  })), coursesLoading ? __jsx(LoadingBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 35\n    }\n  }) : showUps && (courseCards.length < 1 ? __jsx(CourseSearchResultIsNotDefind, {\n    catalog: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 58\n    }\n  }) : null), __jsx(\"div\", {\n    style: {\n      width: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      margin: '10px 0'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    className: styles.link,\n    onClick: () => {\n      addCards();\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }\n  }, \"\\u0421\\u043C\\u043E\\u0442\\u0440\\u0435\\u0442\\u044C \\u0435\\u0449\\u0435\")), __jsx(ContactBlock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }), __jsx(Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default Catalog;","map":{"version":3,"sources":["C:/Server/data/htdocs/oilan-mirror/goco/pages/catalog/index.js"],"names":["styles","Head","Header","React","useEffect","useState","FilterBlock","default","axios","globals","useRouter","Image","SimpleSlider","CourseCategoriesSliderIMG","LoadingBlock","coursesStyles","CourseCard","ContactBlock","Footer","LurkingFilterBlock","CourseSearchResultIsNotDefind","Catalog","router","cardsToShow","setCardsToShow","addCards","ym","filterBtnHandler","centerName","city","direction","price","isOnline","searchingCenter","redirectUrl","push","imagesBase","setImagesBase","loadCourseCards","directionId","setCoursesLoading","result","get","productionServerDomain","setCourseCards","data","console","log","setShowUps","loadFilters","setFiltersLoading","setFilters","loadStocks","setStocksLoading","post","direction_id","setStocks","stocksLoading","filtersLoading","coursesLoading","loadingModal","setLoadingModal","showUps","filters","stocks","courseCards","imagesBaseResponse","then","window","scrollTo","componentDidMount","__html","filterBlockWrapper","titleBlock","titleImg","title","marginTop","padding","width","boxSizing","length","marginBottom","undefined","courses_block","slice","map","course","marginLeft","marginRight","Math","floor","random","src","display","justifyContent","margin","link"],"mappings":"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","sourcesContent":["import styles from './style.module.css'\r\nimport Head from 'next/head'\r\nimport Header from \"../../src/components/Header/Header\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport FilterBlock from \"../../src/components/FilterBlock\";\r\nimport {default as axios} from \"axios\";\r\nimport globals from \"../../src/globals\";\r\nimport {useRouter} from \"next/router\";\r\nimport {Image} from \"react-bootstrap\";\r\nimport SimpleSlider from \"../../src/components/SimpleSlider/SimpleSlider\";\r\n// import NewSlider from \"../../src/components/NewSlider/NewSlider\";\r\nimport CourseCategoriesSliderIMG from \"../../src/components/CourseCategoriesSliderIMG\";\r\nimport LoadingBlock from \"../../src/components/LoadingBlock\";\r\nimport coursesStyles from \"../../styles/components/content/Courses.module.css\";\r\nimport CourseCard from \"../../src/components/CourseCard/CourseCard\";\r\nimport ContactBlock from \"../../src/components/ContactBlock\";\r\nimport Footer from \"../../src/components/Footer/Footer\";\r\nimport LurkingFilterBlock from \"../../src/components/LurkingFilterBlock\";\r\nimport CourseSearchResultIsNotDefind from \"../../src/components/CourseSearchResultIsNotDefind\";\r\n\r\nconst Catalog = () => {\r\n    const router = useRouter();\r\n\r\n    const [cardsToShow, setCardsToShow] = useState(8)\r\n\r\n    const addCards = () => {\r\n            setCardsToShow(cardsToShow+8)\r\n    }\r\n\r\n    const ym = () => {\r\n        return (\r\n            \"<!-- Yandex.Metrika counter -->\\n\" +\r\n            \"<script type=\\\"text/javascript\\\" >\\n\" +\r\n            \"   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};\\n\" +\r\n            \"   m[i].l=1*new Date();k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})\\n\" +\r\n            \"   (window, document, \\\"script\\\", \\\"https://mc.yandex.ru/metrika/tag.js\\\", \\\"ym\\\");\\n\" +\r\n            \"\\n\" +\r\n            \"   ym(78186067, \\\"init\\\", {\\n\" +\r\n            \"        clickmap:true,\\n\" +\r\n            \"        trackLinks:true,\\n\" +\r\n            \"        accurateTrackBounce:true,\\n\" +\r\n            \"        webvisor:true,\\n\" +\r\n            \"        ecommerce:\\\"dataLayer\\\"\\n\" +\r\n            \"   });\\n\" +\r\n            \"</script>\\n\" +\r\n            \"<noscript><div><img src=\\\"https://mc.yandex.ru/watch/78186067\\\" style=\\\"position:absolute; left:-9999px;\\\" alt=\\\"\\\" /></div></noscript>\\n\" +\r\n            \"<!-- /Yandex.Metrika counter -->\"\r\n        );\r\n    }\r\n    const filterBtnHandler = async (centerName, city, direction, price, isOnline, searchingCenter) => {\r\n\r\n        const redirectUrl = `/courses?centerName=${centerName}&direction=${direction}&city=${city}&price=${price}&isOnline=${isOnline}&searchingCenter=${searchingCenter}`\r\n\r\n        await router.push(redirectUrl)\r\n        //\r\n        // let postResult = await axios.post(`${globals.productionServerDomain}/courseCardsFilter/`, data);\r\n        // setCourseCards(postResult['data']);\r\n        // document.querySelector('#coursesBlock').scrollIntoView({\r\n        //     behavior: 'smooth'\r\n        // });\r\n        //\r\n        // setLoading(false);\r\n        // setOpenMoreSort(true)\r\n    }\r\n    const [imagesBase, setImagesBase] = useState([]);\r\n    const loadCourseCards = async (directionId) => {\r\n        setCoursesLoading(true)\r\n        let result = await axios.get(`${globals.productionServerDomain}/courseCards/`);\r\n        setCourseCards(result.data);\r\n        console.log('courseCards', result.data)\r\n        setShowUps(true)\r\n    }\r\n    const loadFilters = async () => {\r\n        setFiltersLoading(true)\r\n        let result = await axios.get(`${globals.productionServerDomain}/filters`);\r\n        setFilters(result.data)\r\n        setFiltersLoading(false)\r\n    }\r\n    const loadStocks = async () => {\r\n        setStocksLoading(true)\r\n        let result = await axios.post(`${globals.productionServerDomain}/loadDirectionPromotions`, {direction_id: 0});\r\n        setStocks(result.data);\r\n    }\r\n\r\n    const [stocksLoading, setStocksLoading] = useState(false);\r\n    const [filtersLoading, setFiltersLoading] = useState(false);\r\n    const [coursesLoading, setCoursesLoading] = useState(false);\r\n    const [loadingModal, setLoadingModal] = useState(false);\r\n\r\n    const [showUps, setShowUps] = useState(false)\r\n\r\n    const [filters, setFilters] = useState([]);\r\n    const [stocks, setStocks] = useState([]);\r\n    const [courseCards, setCourseCards] = useState([]);\r\n\r\n    useEffect(async () => {\r\n        let imagesBaseResponse = await axios.get(`${globals.productionServerDomain}/imagesBase`);\r\n        setImagesBase(imagesBaseResponse.data);\r\n        setCoursesLoading(true);\r\n        loadFilters();\r\n        loadCourseCards().then(() => setCoursesLoading(false));\r\n        loadStocks().then(() => setStocksLoading(false));\r\n        window.scrollTo(0, 0);\r\n    }, [])\r\n\r\n    function componentDidMount() {\r\n        window.scrollTo(0, 0);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <Header white={true}/>\r\n            <Head>\r\n                <title>Oilan - Каталог</title>\r\n                <link rel=\"icon\" href=\"/atom-icon.png\" />\r\n                <div dangerouslySetInnerHTML={{__html: ym()}}/>\r\n            </Head>\r\n\r\n            <div className={styles.filterBlockWrapper}>\r\n                <FilterBlock filters={filters} filterBtnHandler={filterBtnHandler}/>\r\n            </div>\r\n            <div className={styles.titleBlock}>\r\n                <Image src={'/fire-dynamic-color.png'} className={styles.titleImg}/>\r\n                <span className={styles.title} style={{marginTop: 10}}>Актуальные акции</span>\r\n            </div>\r\n            <div style={{padding: '20px 0 60px 0', width: '100%', boxSizing: 'border-box'}}>\r\n                {\r\n                    stocksLoading ? <LoadingBlock/> : (stocks.length != 0 ? <SimpleSlider stocks={stocks}/> : <LoadingBlock/>)\r\n                }\r\n                // <NewSlider/>\r\n            </div>\r\n            <div className={styles.titleBlock} style={{marginTop: 20, marginBottom: 20}}>\r\n                <Image src={'/cryptocurrency-certificate.png'} className={styles.titleImg}/>\r\n                <span className={styles.title}>Ключевые направления</span>\r\n            </div>\r\n            {\r\n                filtersLoading ? <LoadingBlock/> : (filters[1] !== undefined ? <CourseCategoriesSliderIMG categories={filters[1]}/> : null)\r\n            }\r\n            <div className={styles.titleBlock} style={{marginTop: 20, marginBottom: 20}}>\r\n                <Image src={'/notebook-dynamic-color.png'} className={styles.titleImg}/>\r\n                <span className={styles.title}>Популярные курсы</span>\r\n            </div>\r\n            {\r\n                filters[0] != undefined && (<LurkingFilterBlock setCardsToShow={setCardsToShow} cities={filters[0]} directions={filters[1]} setCourseCards={setCourseCards} setCoursesLoading={setCoursesLoading}/>)\r\n            }\r\n\r\n            {\r\n                courseCards.length > 0 && (\r\n                    <div className={styles.courses_block}>\r\n                        {\r\n                            courseCards.slice(0, cardsToShow).map(course => {\r\n                                if(course.title !== 'test'){\r\n                                    return (\r\n                                        <div style={{marginLeft: '5%', marginRight: '5%'}}>\r\n                                            <CourseCard coverImage={imagesBase[Math.floor(Math.random() * imagesBase.length)].src} setLoadingModal={setLoadingModal} course={course} showApplicationModal={true}/>\r\n                                        </div>\r\n                                    )\r\n                                }\r\n                            })\r\n                        }\r\n                    </div>\r\n                )\r\n            }\r\n            {\r\n                coursesLoading ? (<LoadingBlock/> ) : (\r\n                    showUps && (courseCards.length < 1 ? <CourseSearchResultIsNotDefind catalog={true}/> : null)\r\n                )\r\n            }\r\n\r\n\r\n\r\n            <div style={{width: '100%', display: 'flex', justifyContent: 'center', margin: '10px 0'}}>\r\n                <a className={styles.link} onClick={()=> {\r\n                    addCards()\r\n                }}>Смотреть еще</a>\r\n            </div>\r\n            <ContactBlock/>\r\n            <Footer/>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Catalog;\r\n"]},"metadata":{},"sourceType":"module"}